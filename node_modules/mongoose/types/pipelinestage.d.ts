declare module 'mongoose' {
  /**
     * [Stages reference](https://www.mongodb.com/docs/manual/reference/operator/aggregation-pipeline/#aggregation-pipeline-stages)
     */
  e***REMOVED***port type PipelineStage =
    | PipelineStage.AddFields
    | PipelineStage.Bucket
    | PipelineStage.BucketAuto
    | PipelineStage.CollStats
    | PipelineStage.Count
    | PipelineStage.Densify
    | PipelineStage.Documents
    | PipelineStage.Facet
    | PipelineStage.Fill
    | PipelineStage.GeoNear
    | PipelineStage.GraphLookup
    | PipelineStage.Group
    | PipelineStage.Inde***REMOVED***Stats
    | PipelineStage.Limit
    | PipelineStage.ListSessions
    | PipelineStage.Lookup
    | PipelineStage.Match
    | PipelineStage.Merge
    | PipelineStage.Out
    | PipelineStage.PlanCacheStats
    | PipelineStage.Project
    | PipelineStage.Redact
    | PipelineStage.ReplaceRoot
    | PipelineStage.ReplaceWith
    | PipelineStage.Sample
    | PipelineStage.Search
    | PipelineStage.SearchMeta
    | PipelineStage.Set
    | PipelineStage.SetWindowFields
    | PipelineStage.Skip
    | PipelineStage.Sort
    | PipelineStage.SortByCount
    | PipelineStage.UnionWith
    | PipelineStage.Unset
    | PipelineStage.Unwind
    | PipelineStage.VectorSearch;

  e***REMOVED***port namespace PipelineStage {
    e***REMOVED***port interface AddFields {
      /** [`$addFields` reference](https://www.mongodb.com/docs/manual/reference/operator/aggregation/addFields/) */
      $addFields: Record<string, AnyE***REMOVED***pression>
    }

    e***REMOVED***port interface Bucket {
      /** [`$bucket` reference](https://www.mongodb.com/docs/manual/reference/operator/aggregation/bucket/) */
      $bucket: {
        groupBy: E***REMOVED***pression;
        boundaries: any[];
        default?: any
        output?: Record<string, AccumulatorOperator>
      }
    }

    e***REMOVED***port interface BucketAuto {
      /** [`$bucketAuto` reference](https://www.mongodb.com/docs/manual/reference/operator/aggregation/bucketAuto/) */
      $bucketAuto: {
        groupBy: E***REMOVED***pression | Record<string, E***REMOVED***pression>;
        buckets: number;
        output?: Record<string, AccumulatorOperator>;
        granularity?: 'R5' | 'R10' | 'R20' | 'R40' | 'R80' | '1-2-5' | 'E6' | 'E12' | 'E24' | 'E48' | 'E96' | 'E192' | 'POWERSOF2';
      }
    }

    e***REMOVED***port interface CollStats {
      /** [`$collStats` reference](https://www.mongodb.com/docs/manual/reference/operator/aggregation/collStats/) */
      $collStats: {
        latencyStats?: { histograms?: boolean };
        storageStats?: { scale?: number };
        count?: Record<string | number | symbol, never>;
        queryE***REMOVED***ecStats?: Record<string | number | symbol, never>;
      }
    }

    e***REMOVED***port interface Count {
      /** [`$count` reference](https://www.mongodb.com/docs/manual/reference/operator/aggregation/count/) */
      $count: string;
    }

    e***REMOVED***port interface Densify{
      /** [`$densify` reference](https://www.mongodb.com/docs/manual/reference/operator/aggregation/densify/) */
      $densify: {
        field: string,
        partitionByFields?: string[],
        range: {
          step: number,
          unit?: 'millisecond' | 'second' | 'minute' | 'hour' | 'day' | 'week' | 'month' | 'quarter' | 'year',
          bounds: number[] | globalThis.Date[] | 'full' | 'partition'
        }
      }
    }

    e***REMOVED***port interface Documents {
      /** [`$documents` reference](https://www.mongodb.com/docs/manual/reference/operator/aggregation/documents/) */
      $documents: Record<string, E***REMOVED***pression>[]
    }

    e***REMOVED***port interface Fill {
      /** [`$fill` reference](https://www.mongodb.com/docs/manual/reference/operator/aggregation/fill/) */
      $fill: {
        partitionBy?: E***REMOVED***pression,
        partitionByFields?: string[],
        sortBy?: Record<string, 1 | -1>,
        output: Record<string, { value: E***REMOVED***pression } | { method: 'linear' | 'locf' }>
      }
    }

    e***REMOVED***port interface Facet {
      /** [`$facet` reference](https://www.mongodb.com/docs/manual/reference/operator/aggregation/facet/) */
      $facet: Record<string, FacetPipelineStage[]>;
    }

    e***REMOVED***port type FacetPipelineStage = E***REMOVED***clude<PipelineStage, PipelineStage.CollStats | PipelineStage.Facet | PipelineStage.GeoNear | PipelineStage.Inde***REMOVED***Stats | PipelineStage.Out | PipelineStage.Merge | PipelineStage.PlanCacheStats>;

    e***REMOVED***port interface GeoNear {
      /** [`$geoNear` reference](https://www.mongodb.com/docs/manual/reference/operator/aggregation/geoNear/) */
      $geoNear: {
        near: { type: 'Point'; coordinates: [number, number] } | [number, number];
        distanceField: string;
        distanceMultiplier?: number;
        includeLocs?: string;
        key?: string;
        ma***REMOVED***Distance?: number;
        minDistance?: number;
        query?: AnyObject;
        spherical?: boolean;
        /**
         * Deprecated. Use only with MondoDB below 4.2 (removed in 4.2)
         * @deprecated
         */
        num?: number;
      }
    }

    e***REMOVED***port interface GraphLookup {
      /** [`$graphLookup` reference](https://www.mongodb.com/docs/manual/reference/operator/aggregation/graphLookup/) */
      $graphLookup: {
        from: string;
        startWith: any
        connectFromField: string;
        connectToField: string;
        as: string;
        ma***REMOVED***Depth?: number;
        depthField?: string;
        restrictSearchWithMatch?: AnyObject;
      }
    }

    e***REMOVED***port interface Group {
      /** [`$group` reference](https://www.mongodb.com/docs/manual/reference/operator/aggregation/group) */
      $group: { _id: any } | { [key: string]: AccumulatorOperator }
    }

    e***REMOVED***port interface Inde***REMOVED***Stats {
      /** [`$inde***REMOVED***Stats` reference](https://www.mongodb.com/docs/manual/reference/operator/aggregation/inde***REMOVED***Stats/) */
      $inde***REMOVED***Stats: Record<string | number | symbol, never>;
    }

    e***REMOVED***port interface Limit {
      /** [`$limit` reference](https://www.mongodb.com/docs/manual/reference/operator/aggregation/limit/) */
      $limit: number
    }

    e***REMOVED***port interface ListSessions {
      /** [`$listSessions` reference](https://www.mongodb.com/docs/manual/reference/operator/aggregation/listSessions/) */
      $listSessions: { users?: { user: string; db: string }[] } | { allUsers?: true }
    }

    e***REMOVED***port interface Lookup {
      /** [`$lookup` reference](https://www.mongodb.com/docs/manual/reference/operator/aggregation/lookup/) */
      $lookup: {
        from: string
        as: string
        localField?: string
        foreignField?: string
        let?: Record<string, any>
        pipeline?: E***REMOVED***clude<PipelineStage, PipelineStage.Merge | PipelineStage.Out>[]
      }
    }

    e***REMOVED***port interface Match {
      /** [`$match` reference](https://www.mongodb.com/docs/manual/reference/operator/aggregation/match/) */
      $match: FilterQuery<any>;
    }

    e***REMOVED***port interface Merge {
      /** [`$merge` reference](https://www.mongodb.com/docs/manual/reference/operator/aggregation/merge/) */
      $merge: {
        into: string | { db: string; coll: string }
        on?: string | string[]
        let?: Record<string, E***REMOVED***pression>
        whenMatched?: 'replace' | 'keepE***REMOVED***isting' | 'merge' | 'fail' | E***REMOVED***tract<PipelineStage, PipelineStage.AddFields | PipelineStage.Set | PipelineStage.Project | PipelineStage.Unset | PipelineStage.ReplaceRoot | PipelineStage.ReplaceWith>[]
        whenNotMatched?: 'insert' | 'discard' | 'fail'
      }
    }

    e***REMOVED***port interface Out {
      /** [`$out` reference](https://www.mongodb.com/docs/manual/reference/operator/aggregation/out/) */
      $out: string | { db: string; coll: string }
    }

    e***REMOVED***port interface PlanCacheStats {
      /** [`$planCacheStats` reference](https://www.mongodb.com/docs/manual/reference/operator/aggregation/planCacheStats/) */
      $planCacheStats: Record<string | number | symbol, never>
    }

    e***REMOVED***port interface Project {
      /** [`$project` reference](https://www.mongodb.com/docs/manual/reference/operator/aggregation/project/) */
      $project: { [field: string]: AnyE***REMOVED***pression | E***REMOVED***pression | Project['$project'] }
    }

    e***REMOVED***port interface Redact {
      /** [`$redact` reference](https://www.mongodb.com/docs/manual/reference/operator/aggregation/redact/) */
      $redact: E***REMOVED***pression;
    }

    e***REMOVED***port interface ReplaceRoot {
      /** [`$replaceRoot` reference](https://www.mongodb.com/docs/manual/reference/operator/aggregation/replaceRoot/) */
      $replaceRoot: { newRoot: AnyE***REMOVED***pression }
    }

    e***REMOVED***port interface ReplaceWith {
      /** [`$replaceWith` reference](https://www.mongodb.com/docs/manual/reference/operator/aggregation/replaceWith/) */
      $replaceWith: ObjectE***REMOVED***pressionOperator | { [field: string]: E***REMOVED***pression } | `$${string}`;
    }

    e***REMOVED***port interface Sample {
      /** [`$sample` reference](https://www.mongodb.com/docs/manual/reference/operator/aggregation/sample/) */
      $sample: { size: number }
    }

    e***REMOVED***port interface Search {
      /** [`$search` reference](https://www.mongodb.com/docs/atlas/atlas-search/query-synta***REMOVED***/) */
      $search: {
        inde***REMOVED***?: string;
        highlight?: {
          /** [`highlightPath` reference](https://docs.atlas.mongodb.com/atlas-search/path-construction/#multiple-field-search) */
          path: string | string[] | { value: string, multi: string };
          ma***REMOVED***CharsToE***REMOVED***amine?: number;
          ma***REMOVED***NumPassages?: number;
        };
        [operator: string]: any;
      }
    }

    e***REMOVED***port interface SearchMeta {
      /** [`$searchMeta` reference](https://www.mongodb.com/docs/atlas/atlas-search/query-synta***REMOVED***/#mongodb-pipeline-pipe.-searchMeta) */
      $searchMeta: {
        inde***REMOVED***?: string;
        highlight?: {
          /** [`highlightPath` reference](https://docs.atlas.mongodb.com/atlas-search/path-construction/#multiple-field-search) */
          path: string | string[] | { value: string, multi: string };
          ma***REMOVED***CharsToE***REMOVED***amine?: number;
          ma***REMOVED***NumPassages?: number;
        };
        [operator: string]: any;
      }
    }

    e***REMOVED***port interface Set {
      /** [`$set` reference](https://www.mongodb.com/docs/manual/reference/operator/aggregation/set/) */
      $set: Record<string, AnyE***REMOVED***pression | any>
    }

    e***REMOVED***port interface SetWindowFields {
      /** [`$setWindowFields` reference](https://www.mongodb.com/docs/manual/reference/operator/aggregation/setWindowFields/) */
      $setWindowFields: {
        partitionBy?: any
        sortBy?: Record<string, 1 | -1>
        output: Record<
        string,
        WindowOperator & {
          window?: {
            documents?: [string | number, string | number]
            range?: [string | number, string | number]
            unit?: 'year' | 'quarter' | 'month' | 'week' | 'day' | 'hour' | 'minute' | 'second' | 'millisecond'
          }
        }
        >
      }
    }

    e***REMOVED***port interface Skip {
      /** [`$skip` reference](https://www.mongodb.com/docs/manual/reference/operator/aggregation/skip/) */
      $skip: number
    }

    e***REMOVED***port interface Sort {
      /** [`$sort` reference](https://www.mongodb.com/docs/manual/reference/operator/aggregation/sort/) */
      $sort: Record<string, 1 | -1 | E***REMOVED***pression.Meta>
    }

    e***REMOVED***port interface SortByCount {
      /** [`$sortByCount` reference](https://www.mongodb.com/docs/manual/reference/operator/aggregation/sortByCount/) */
      $sortByCount: E***REMOVED***pression;
    }

    e***REMOVED***port interface UnionWith {
      /** [`$unionWith` reference](https://www.mongodb.com/docs/manual/reference/operator/aggregation/unionWith/) */
      $unionWith:
      | string
      | { coll: string; pipeline?: E***REMOVED***clude<PipelineStage, PipelineStage.Out | PipelineStage.Merge>[] }
      | { coll?: string; pipeline: E***REMOVED***clude<PipelineStage, PipelineStage.Out | PipelineStage.Merge>[] }
    }

    e***REMOVED***port interface Unset {
      /** [`$unset` reference](https://www.mongodb.com/docs/manual/reference/operator/aggregation/unset/) */
      $unset: string | string[]
    }

    e***REMOVED***port interface Unwind {
      /** [`$unwind` reference](https://www.mongodb.com/docs/manual/reference/operator/aggregation/unwind/) */
      $unwind: string | { path: string; includeArrayInde***REMOVED***?: string; preserveNullAndEmptyArrays?: boolean }
    }
    e***REMOVED***port interface VectorSearch {
      /** [`$vectorSearch` reference](https://www.mongodb.com/docs/atlas/atlas-vector-search/vector-search-stage/) */
      $vectorSearch: {
        inde***REMOVED***: string,
        path: string,
        queryVector: number[],
        numCandidates: number,
        limit: number,
        filter?: E***REMOVED***pression,
      }
    }

  }
}
