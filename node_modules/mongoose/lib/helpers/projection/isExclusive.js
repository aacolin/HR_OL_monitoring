'use strict';

const isDefiningProjection = require('./isDefiningProjection');
const isPOJO = require('../isPOJO');

/*!
 * ignore
 */

module.e***REMOVED***ports = function isE***REMOVED***clusive(projection) {
  if (projection == null) {
    return null;
  }

  const keys = Object.keys(projection);
  let e***REMOVED***clude = null;

  if (keys.length === 1 && keys[0] === '_id') {
    e***REMOVED***clude = !projection._id;
  } else {
    for (let ki = 0; ki < keys.length; ++ki) {
      // Does this projection e***REMOVED***plicitly define inclusion/e***REMOVED***clusion?
      // E***REMOVED***plicitly avoid `$meta` and `$slice`
      const key = keys[ki];
      if (key !== '_id' && isDefiningProjection(projection[key])) {
        e***REMOVED***clude = isPOJO(projection[key]) ?
          (isE***REMOVED***clusive(projection[key]) ?? e***REMOVED***clude) :
          !projection[key];
        if (e***REMOVED***clude != null) {
          break;
        }
      }
    }
  }

  return e***REMOVED***clude;
};
