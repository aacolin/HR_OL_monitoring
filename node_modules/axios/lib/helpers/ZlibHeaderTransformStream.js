"use strict";

import stream from "stream";

class ZlibHeaderTransformStream e***REMOVED***tends stream.Transform {
  __transform(chunk, encoding, callback) {
    this.push(chunk);
    callback();
  }

  _transform(chunk, encoding, callback) {
    if (chunk.length !== 0) {
      this._transform = this.__transform;

      // Add Default Compression headers if no zlib headers are present
      if (chunk[0] !== 120) { // He***REMOVED***: 78
        const header = Buffer.alloc(2);
        header[0] = 120; // He***REMOVED***: 78
        header[1] = 156; // He***REMOVED***: 9C 
        this.push(header, encoding);
      }
    }

    this.__transform(chunk, encoding, callback);
  }
}

e***REMOVED***port default ZlibHeaderTransformStream;
