
<h3 align="center"> ðŸ¥‡ Gold sponsors <br> </h3> <table align="center" width="100%"><tr width="33.333333333333336%"><td align="center" width="33.333333333333336%"> <a href="https://opencollective.com/buy-instagram-followers-buzzoid?utm_source&#***REMOVED***3D;a***REMOVED***ios&amp;utm_medium&#***REMOVED***3D;sponsorlist&amp;utm_campaign&#***REMOVED***3D;sponsorship" style="padding: 10p***REMOVED***; display: inline-block"> <img width="62p***REMOVED***" height="70p***REMOVED***" src="https://a***REMOVED***ios-http.com/assets/sponsors/opencollective/buy-instagram-followers-buzzoid.png" alt="Buzzoid - Buy Instagram Followers"/> </a> <p align="center" title="At Buzzoid, you can buy Instagram followers quickly, safely, and easily with just a few clicks. Rated world&#***REMOVED***27;s #1 IG service since 2012.">At Buzzoid, you can buy Instagram followers quickly, safely, and easily with just a few clicks. Rate...</p> <p align="center"> </p>
</td><td align="center" width="33.333333333333336%"> <a href="https://stytch.com/?utm_source&#***REMOVED***3D;oss-sponsorship&amp;utm_medium&#***REMOVED***3D;paid_sponsorship&amp;utm_content&#***REMOVED***3D;website-link&amp;utm_campaign&#***REMOVED***3D;a***REMOVED***ios-http" style="padding: 10p***REMOVED***; display: inline-block"> <picture> <source width="200p***REMOVED***" height="38p***REMOVED***" media="(prefers-color-scheme: dark)" srcset="/assets/sponsors/stytch_white.png"> <img width="200p***REMOVED***" height="38p***REMOVED***" src="https://a***REMOVED***ios-http.com/assets/sponsors/stytch.png" alt="Stytch"/> </picture> </a> <p align="center" title="API-first authentication, authorization, and fraud prevention">API-first authentication, authorization, and fraud prevention</p> <p align="center"> <a href="https://stytch.com/?utm_source&#***REMOVED***3D;oss-sponsorship&amp;utm_medium&#***REMOVED***3D;paid_sponsorship&amp;utm_content&#***REMOVED***3D;website-link&amp;utm_campaign&#***REMOVED***3D;a***REMOVED***ios-http"><b>Website</b></a> | <a href="https://stytch.com/docs?utm_source&#***REMOVED***3D;oss-sponsorship&amp;utm_medium&#***REMOVED***3D;paid_sponsorship&amp;utm_content&#***REMOVED***3D;docs-link&amp;utm_campaign&#***REMOVED***3D;a***REMOVED***ios-http"><b>Documentation</b></a> | <a href="https://github.com/stytchauth/stytch-node?utm_source&#***REMOVED***3D;oss-sponsorship&amp;utm_medium&#***REMOVED***3D;paid_sponsorship&amp;utm_content&#***REMOVED***3D;node-sdk&amp;utm_campaign&#***REMOVED***3D;a***REMOVED***ios-http"><b>Node.js</b></a> </p>
</td><td align="center" width="33.333333333333336%"> <a href="https://www.principal.com/about-us?utm_source&#***REMOVED***3D;a***REMOVED***ios&amp;utm_medium&#***REMOVED***3D;sponsorlist&amp;utm_campaign&#***REMOVED***3D;sponsorship" style="padding: 10p***REMOVED***; display: inline-block"> <img width="133p***REMOVED***" height="43p***REMOVED***" src="https://a***REMOVED***ios-http.com/assets/sponsors/principal.svg" alt="Principal Financial Group"/> </a> <p align="center" title="Weâ€™re bound by one common purpose: to give you the financial tools, resources and information you need to live your best life.">Weâ€™re bound by one common purpose: to give you the financial tools, resources and information you ne...</p> <p align="center"> </p>
</td></tr><tr width="33.333333333333336%"><td align="center" width="33.333333333333336%"> <a href="https://www.descope.com/?utm_source&#***REMOVED***3D;a***REMOVED***ios&amp;utm_medium&#***REMOVED***3D;referral&amp;utm_campaign&#***REMOVED***3D;a***REMOVED***ios-oss-sponsorship" style="padding: 10p***REMOVED***; display: inline-block"> <picture> <source width="200p***REMOVED***" height="52p***REMOVED***" media="(prefers-color-scheme: dark)" srcset="/assets/sponsors/descope_white.png"> <img width="200p***REMOVED***" height="52p***REMOVED***" src="https://a***REMOVED***ios-http.com/assets/sponsors/descope.png" alt="Descope"/> </picture> </a> <p align="center" title="Hi, we&#***REMOVED***27;re Descope! We are building something in the authentication space for app developers and canâ€™t wait to place it in your hands.">Hi, we&#***REMOVED***27;re Descope! We are building something in the authentication space for app developers and...</p> <p align="center"> <a href="https://www.descope.com/?utm_source&#***REMOVED***3D;a***REMOVED***ios&amp;utm_medium&#***REMOVED***3D;referral&amp;utm_campaign&#***REMOVED***3D;a***REMOVED***ios-oss-sponsorship"><b>Website</b></a> | <a href="https://docs.descope.com/?utm_source&#***REMOVED***3D;a***REMOVED***ios&amp;utm_medium&#***REMOVED***3D;referral&amp;utm_campaign&#***REMOVED***3D;a***REMOVED***ios-oss-sponsorship"><b>Documentation</b></a> | <a href="https://www.descope.com/community?utm_source&#***REMOVED***3D;a***REMOVED***ios&amp;utm_medium&#***REMOVED***3D;referral&amp;utm_campaign&#***REMOVED***3D;a***REMOVED***ios-oss-sponsorship"><b>Community</b></a> </p>
</td><td align="center" width="33.333333333333336%"> <a href="https://route4me.com/?utm_source&#***REMOVED***3D;a***REMOVED***ios&amp;utm_medium&#***REMOVED***3D;sponsorlist&amp;utm_campaign&#***REMOVED***3D;sponsorship" style="padding: 10p***REMOVED***; display: inline-block"> <picture> <source width="200p***REMOVED***" height="51p***REMOVED***" media="(prefers-color-scheme: dark)" srcset="/assets/sponsors/route4me_white.png"> <img width="200p***REMOVED***" height="51p***REMOVED***" src="https://a***REMOVED***ios-http.com/assets/sponsors/route4me.png" alt="Route4Me"/> </picture> </a> <p align="center" title="Best Route Planning And Route Optimization Software">Best Route Planning And Route Optimization Software</p> <p align="center"> <a href="https://route4me.com/platform/route-optimization-software"><b>E***REMOVED***plore</b></a> | <a href="https://route4me.com/platform/marketplace/pricing"><b>Free Trial</b></a> | <a href="https://route4me.com/contact"><b>Contact</b></a> </p>
</td></tr></table>

<!--<div>marker</div>-->
<br><br>
<div align="center">
   <a href="https://a***REMOVED***ios-http.com"><img src="https://a***REMOVED***ios-http.com/assets/logo.svg" /></a><br>
</div>

<p align="center">Promise based HTTP client for the browser and node.js</p>

<p align="center">
    <a href="https://a***REMOVED***ios-http.com/"><b>Website</b></a> â€¢
    <a href="https://a***REMOVED***ios-http.com/docs/intro"><b>Documentation</b></a>
</p>

<div align="center">

[![npm version](https://img.shields.io/npm/v/a***REMOVED***ios.svg?style=flat-square)](https://www.npmjs.org/package/a***REMOVED***ios)
[![CDNJS](https://img.shields.io/cdnjs/v/a***REMOVED***ios.svg?style=flat-square)](https://cdnjs.com/libraries/a***REMOVED***ios)
[![Build status](https://img.shields.io/github/actions/workflow/status/a***REMOVED***ios/a***REMOVED***ios/ci.yml?branch=v1.***REMOVED***&label=CI&logo=github&style=flat-square)](https://github.com/a***REMOVED***ios/a***REMOVED***ios/actions/workflows/ci.yml)
[![Gitpod Ready-to-Code](https://img.shields.io/badge/Gitpod-Ready--to--Code-blue?logo=gitpod&style=flat-square)](https://gitpod.io/#https://github.com/a***REMOVED***ios/a***REMOVED***ios)
[![code coverage](https://img.shields.io/coveralls/mzabriskie/a***REMOVED***ios.svg?style=flat-square)](https://coveralls.io/r/mzabriskie/a***REMOVED***ios)
[![install size](https://img.shields.io/badge/dynamic/json?url=https://packagephobia.com/v2/api.json?p=a***REMOVED***ios&query=$.install.pretty&label=install%20size&style=flat-square)](https://packagephobia.now.sh/result?p=a***REMOVED***ios)
[![npm bundle size](https://img.shields.io/bundlephobia/minzip/a***REMOVED***ios?style=flat-square)](https://bundlephobia.com/package/a***REMOVED***ios@latest)
[![npm downloads](https://img.shields.io/npm/dm/a***REMOVED***ios.svg?style=flat-square)](https://npm-stat.com/charts.html?package=a***REMOVED***ios)
[![gitter chat](https://img.shields.io/gitter/room/mzabriskie/a***REMOVED***ios.svg?style=flat-square)](https://gitter.im/mzabriskie/a***REMOVED***ios)
[![code helpers](https://www.codetriage.com/a***REMOVED***ios/a***REMOVED***ios/badges/users.svg)](https://www.codetriage.com/a***REMOVED***ios/a***REMOVED***ios)
[![Known Vulnerabilities](https://snyk.io/test/npm/a***REMOVED***ios/badge.svg)](https://snyk.io/test/npm/a***REMOVED***ios)




</div>

## Table of Contents

  - [Features](#features)
  - [Browser Support](#browser-support)
  - [Installing](#installing)
    - [Package manager](#package-manager)
    - [CDN](#cdn)
  - [E***REMOVED***ample](#e***REMOVED***ample)
  - [A***REMOVED***ios API](#a***REMOVED***ios-api)
  - [Request method aliases](#request-method-aliases)
  - [Concurrency ðŸ‘Ž](#concurrency-deprecated)
  - [Creating an instance](#creating-an-instance)
  - [Instance methods](#instance-methods)
  - [Request Config](#request-config)
  - [Response Schema](#response-schema)
  - [Config Defaults](#config-defaults)
    - [Global a***REMOVED***ios defaults](#global-a***REMOVED***ios-defaults)
    - [Custom instance defaults](#custom-instance-defaults)
    - [Config order of precedence](#config-order-of-precedence)
  - [Interceptors](#interceptors)
    - [Multiple Interceptors](#multiple-interceptors)
  - [Handling Errors](#handling-errors)
  - [Cancellation](#cancellation)
    - [AbortController](#abortcontroller)
    - [CancelToken ðŸ‘Ž](#canceltoken-deprecated)
  - [Using application/***REMOVED***-www-form-urlencoded format](#using-application***REMOVED***-www-form-urlencoded-format)
    - [URLSearchParams](#urlsearchparams)
    - [Query string](#query-string-older-browsers)
    - [ðŸ†• Automatic serialization](#-automatic-serialization-to-urlsearchparams)
  - [Using multipart/form-data format](#using-multipartform-data-format)
    - [FormData](#formdata)
    - [ðŸ†• Automatic serialization](#-automatic-serialization-to-formdata)
  - [Files Posting](#files-posting)
  - [HTML Form Posting](#-html-form-posting-browser)
  - [ðŸ†• Progress capturing](#-progress-capturing)
  - [ðŸ†• Rate limiting](#-progress-capturing)
  - [ðŸ†• A***REMOVED***iosHeaders](#-a***REMOVED***iosheaders)
  - [ðŸ”¥ Fetch adapter](#-fetch-adapter)
  - [Semver](#semver)
  - [Promises](#promises)
  - [TypeScript](#typescript)
  - [Resources](#resources)
  - [Credits](#credits)
  - [License](#license)

## Features

- Make [XMLHttpRequests](https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest) from the browser
- Make [http](https://nodejs.org/api/http.html) requests from node.js
- Supports the [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise) API
- Intercept request and response
- Transform request and response data
- Cancel requests
- Automatic transforms for [JSON](https://www.json.org/json-en.html) data
- ðŸ†• Automatic data object serialization to `multipart/form-data` and `***REMOVED***-www-form-urlencoded` body encodings
- Client side support for protecting against [XSRF](https://en.wikipedia.org/wiki/Cross-site_request_forgery)

## Browser Support

![Chrome](https://raw.githubusercontent.com/alrra/browser-logos/main/src/chrome/chrome_48***REMOVED***48.png) | ![Firefo***REMOVED***](https://raw.githubusercontent.com/alrra/browser-logos/main/src/firefo***REMOVED***/firefo***REMOVED***_48***REMOVED***48.png) | ![Safari](https://raw.githubusercontent.com/alrra/browser-logos/main/src/safari/safari_48***REMOVED***48.png) | ![Opera](https://raw.githubusercontent.com/alrra/browser-logos/main/src/opera/opera_48***REMOVED***48.png) | ![Edge](https://raw.githubusercontent.com/alrra/browser-logos/main/src/edge/edge_48***REMOVED***48.png) | ![IE](https://raw.githubusercontent.com/alrra/browser-logos/master/src/archive/internet-e***REMOVED***plorer_9-11/internet-e***REMOVED***plorer_9-11_48***REMOVED***48.png) |
--- | --- | --- | --- | --- | --- |
Latest âœ” | Latest âœ” | Latest âœ” | Latest âœ” | Latest âœ” | 11 âœ” |

[![Browser Matri***REMOVED***](https://saucelabs.com/open_sauce/build_matri***REMOVED***/a***REMOVED***ios.svg)](https://saucelabs.com/u/a***REMOVED***ios)

## Installing

### Package manager

Using npm:

```bash
$ npm install a***REMOVED***ios
```

Using bower:

```bash
$ bower install a***REMOVED***ios
```

Using yarn:

```bash
$ yarn add a***REMOVED***ios
```

Using pnpm:

```bash
$ pnpm add a***REMOVED***ios
```

Once the package is installed, you can import the library using `import` or `require` approach:

```js
import a***REMOVED***ios, {isCancel, A***REMOVED***iosError} from 'a***REMOVED***ios';
```

You can also use the default e***REMOVED***port, since the named e***REMOVED***port is just a re-e***REMOVED***port from the A***REMOVED***ios factory:

```js
import a***REMOVED***ios from 'a***REMOVED***ios';

console.log(a***REMOVED***ios.isCancel('something'));
````

If you use `require` for importing, **only default e***REMOVED***port is available**:

```js
const a***REMOVED***ios = require('a***REMOVED***ios');

console.log(a***REMOVED***ios.isCancel('something'));
```

For cases where something went wrong when trying to import a module into a custom or legacy environment,
you can try importing the module package directly:

```js
const a***REMOVED***ios = require('a***REMOVED***ios/dist/browser/a***REMOVED***ios.cjs'); // browser commonJS bundle (ES2017)
// const a***REMOVED***ios = require('a***REMOVED***ios/dist/node/a***REMOVED***ios.cjs'); // node commonJS bundle (ES2017)
```

### CDN

Using jsDelivr CDN (ES5 UMD browser module):

```html
<script src="https://cdn.jsdelivr.net/npm/a***REMOVED***ios@1.6.7/dist/a***REMOVED***ios.min.js"></script>
```

Using unpkg CDN:

```html
<script src="https://unpkg.com/a***REMOVED***ios@1.6.7/dist/a***REMOVED***ios.min.js"></script>
```

## E***REMOVED***ample

> **Note**: CommonJS usage  
> In order to gain the TypeScript typings (for intellisense / autocomplete) while using CommonJS imports with `require()`, use the following approach:

```js
import a***REMOVED***ios from 'a***REMOVED***ios';
//const a***REMOVED***ios = require('a***REMOVED***ios'); // legacy way

// Make a request for a user with a given ID
a***REMOVED***ios.get('/user?ID=12345')
  .then(function (response) {
    // handle success
    console.log(response);
  })
  .catch(function (error) {
    // handle error
    console.log(error);
  })
  .finally(function () {
    // always e***REMOVED***ecuted
  });

// Optionally the request above could also be done as
a***REMOVED***ios.get('/user', {
    params: {
      ID: 12345
    }
  })
  .then(function (response) {
    console.log(response);
  })
  .catch(function (error) {
    console.log(error);
  })
  .finally(function () {
    // always e***REMOVED***ecuted
  });

// Want to use async/await? Add the `async` keyword to your outer function/method.
async function getUser() {
  try {
    const response = await a***REMOVED***ios.get('/user?ID=12345');
    console.log(response);
  } catch (error) {
    console.error(error);
  }
}
```

> **Note**: `async/await` is part of ECMAScript 2017 and is not supported in Internet
> E***REMOVED***plorer and older browsers, so use with caution.

Performing a `POST` request

```js
a***REMOVED***ios.post('/user', {
    firstName: 'Fred',
    lastName: 'Flintstone'
  })
  .then(function (response) {
    console.log(response);
  })
  .catch(function (error) {
    console.log(error);
  });
```

Performing multiple concurrent requests

```js
function getUserAccount() {
  return a***REMOVED***ios.get('/user/12345');
}

function getUserPermissions() {
  return a***REMOVED***ios.get('/user/12345/permissions');
}

Promise.all([getUserAccount(), getUserPermissions()])
  .then(function (results) {
    const acct = results[0];
    const perm = results[1];
  });
```

## a***REMOVED***ios API

Requests can be made by passing the relevant config to `a***REMOVED***ios`.

##### a***REMOVED***ios(config)

```js
// Send a POST request
a***REMOVED***ios({
  method: 'post',
  url: '/user/12345',
  data: {
    firstName: 'Fred',
    lastName: 'Flintstone'
  }
});
```

```js
// GET request for remote image in node.js
a***REMOVED***ios({
  method: 'get',
  url: 'https://bit.ly/2mTM3nY',
  responseType: 'stream'
})
  .then(function (response) {
    response.data.pipe(fs.createWriteStream('ada_lovelace.jpg'))
  });
```

##### a***REMOVED***ios(url[, config])

```js
// Send a GET request (default method)
a***REMOVED***ios('/user/12345');
```

### Request method aliases

For convenience, aliases have been provided for all common request methods.

##### a***REMOVED***ios.request(config)
##### a***REMOVED***ios.get(url[, config])
##### a***REMOVED***ios.delete(url[, config])
##### a***REMOVED***ios.head(url[, config])
##### a***REMOVED***ios.options(url[, config])
##### a***REMOVED***ios.post(url[, data[, config]])
##### a***REMOVED***ios.put(url[, data[, config]])
##### a***REMOVED***ios.patch(url[, data[, config]])

###### NOTE
When using the alias methods `url`, `method`, and `data` properties don't need to be specified in config.

### Concurrency (Deprecated)
Please use `Promise.all` to replace the below functions.

Helper functions for dealing with concurrent requests.

a***REMOVED***ios.all(iterable)
a***REMOVED***ios.spread(callback)

### Creating an instance

You can create a new instance of a***REMOVED***ios with a custom config.

##### a***REMOVED***ios.create([config])

```js
const instance = a***REMOVED***ios.create({
  baseURL: 'https://some-domain.com/api/',
  timeout: 1000,
  headers: {'X-Custom-Header': 'foobar'}
});
```

### Instance methods

The available instance methods are listed below. The specified config will be merged with the instance config.

##### a***REMOVED***ios#request(config)
##### a***REMOVED***ios#get(url[, config])
##### a***REMOVED***ios#delete(url[, config])
##### a***REMOVED***ios#head(url[, config])
##### a***REMOVED***ios#options(url[, config])
##### a***REMOVED***ios#post(url[, data[, config]])
##### a***REMOVED***ios#put(url[, data[, config]])
##### a***REMOVED***ios#patch(url[, data[, config]])
##### a***REMOVED***ios#getUri([config])

## Request Config

These are the available config options for making requests. Only the `url` is required. Requests will default to `GET` if `method` is not specified.

```js
{
  // `url` is the server URL that will be used for the request
  url: '/user',

  // `method` is the request method to be used when making the request
  method: 'get', // default

  // `baseURL` will be prepended to `url` unless `url` is absolute.
  // It can be convenient to set `baseURL` for an instance of a***REMOVED***ios to pass relative URLs
  // to methods of that instance.
  baseURL: 'https://some-domain.com/api/',

  // `transformRequest` allows changes to the request data before it is sent to the server
  // This is only applicable for request methods 'PUT', 'POST', 'PATCH' and 'DELETE'
  // The last function in the array must return a string or an instance of Buffer, ArrayBuffer,
  // FormData or Stream
  // You may modify the headers object.
  transformRequest: [function (data, headers) {
    // Do whatever you want to transform the data

    return data;
  }],

  // `transformResponse` allows changes to the response data to be made before
  // it is passed to then/catch
  transformResponse: [function (data) {
    // Do whatever you want to transform the data

    return data;
  }],

  // `headers` are custom headers to be sent
  headers: {'X-Requested-With': 'XMLHttpRequest'},

  // `params` are the URL parameters to be sent with the request
  // Must be a plain object or a URLSearchParams object
  params: {
    ID: 12345
  },
  
  // `paramsSerializer` is an optional config that allows you to customize serializing `params`. 
  paramsSerializer: {

    //Custom encoder function which sends key/value pairs in an iterative fashion.
    encode?: (param: string): string => { /* Do custom operations here and return transformed string */ }, 
    
    // Custom serializer function for the entire parameter. Allows user to mimic pre 1.***REMOVED*** behaviour.
    serialize?: (params: Record<string, any>, options?: ParamsSerializerOptions ), 
    
    //Configuration for formatting array inde***REMOVED***es in the params. 
    inde***REMOVED***es: false // Three available options: (1) inde***REMOVED***es: null (leads to no brackets), (2) (default) inde***REMOVED***es: false (leads to empty brackets), (3) inde***REMOVED***es: true (leads to brackets with inde***REMOVED***es).    
  },

  // `data` is the data to be sent as the request body
  // Only applicable for request methods 'PUT', 'POST', 'DELETE , and 'PATCH'
  // When no `transformRequest` is set, must be of one of the following types:
  // - string, plain object, ArrayBuffer, ArrayBufferView, URLSearchParams
  // - Browser only: FormData, File, Blob
  // - Node only: Stream, Buffer, FormData (form-data package)
  data: {
    firstName: 'Fred'
  },

  // synta***REMOVED*** alternative to send data into the body
  // method post
  // only the value is sent, not the key
  data: 'Country=Brasil&City=Belo Horizonte',

  // `timeout` specifies the number of milliseconds before the request times out.
  // If the request takes longer than `timeout`, the request will be aborted.
  timeout: 1000, // default is `0` (no timeout)

  // `withCredentials` indicates whether or not cross-site Access-Control requests
  // should be made using credentials
  withCredentials: false, // default

  // `adapter` allows custom handling of requests which makes testing easier.
  // Return a promise and supply a valid response (see lib/adapters/README.md)
  adapter: function (config) {
    /* ... */
  },
  // Also, you can set the name of the built-in adapter, or provide an array with their names
  // to choose the first available in the environment
  adapter: '***REMOVED***hr' // 'fetch' | 'http' | ['***REMOVED***hr', 'http', 'fetch']

  // `auth` indicates that HTTP Basic auth should be used, and supplies credentials.
  // This will set an `Authorization` header, overwriting any e***REMOVED***isting
  // `Authorization` custom headers you have set using `headers`.
  // Please note that only HTTP Basic auth is configurable through this parameter.
  // For Bearer tokens and such, use `Authorization` custom headers instead.
  auth: {
    username: 'janedoe',
    password: 's00pers3cret'
  },

  // `responseType` indicates the type of data that the server will respond with
  // options are: 'arraybuffer', 'document', 'json', 'te***REMOVED***t', 'stream'
  //   browser only: 'blob'
  responseType: 'json', // default

  // `responseEncoding` indicates encoding to use for decoding responses (Node.js only)
  // Note: Ignored for `responseType` of 'stream' or client-side requests
  // options are: 'ascii', 'ASCII', 'ansi', 'ANSI', 'binary', 'BINARY', 'base64', 'BASE64', 'base64url',
  // 'BASE64URL', 'he***REMOVED***', 'HEX', 'latin1', 'LATIN1', 'ucs-2', 'UCS-2', 'ucs2', 'UCS2', 'utf-8', 'UTF-8',
  // 'utf8', 'UTF8', 'utf16le', 'UTF16LE'
  responseEncoding: 'utf8', // default

  // `***REMOVED***srfCookieName` is the name of the cookie to use as a value for ***REMOVED***srf token
  ***REMOVED***srfCookieName: 'XSRF-TOKEN', // default

  // `***REMOVED***srfHeaderName` is the name of the http header that carries the ***REMOVED***srf token value
  ***REMOVED***srfHeaderName: 'X-XSRF-TOKEN', // default
    
  // `undefined` (default) - set XSRF header only for the same origin requests
  withXSRFToken: boolean | undefined | ((config: InternalA***REMOVED***iosRequestConfig) => boolean | undefined),

  // `onUploadProgress` allows handling of progress events for uploads
  // browser & node.js
  onUploadProgress: function ({loaded, total, progress, bytes, estimated, rate, upload = true}) {
    // Do whatever you want with the A***REMOVED***ios progress event
  },

  // `onDownloadProgress` allows handling of progress events for downloads
  // browser & node.js
  onDownloadProgress: function ({loaded, total, progress, bytes, estimated, rate, download = true}) {
    // Do whatever you want with the A***REMOVED***ios progress event
  },

  // `ma***REMOVED***ContentLength` defines the ma***REMOVED*** size of the http response content in bytes allowed in node.js
  ma***REMOVED***ContentLength: 2000,

  // `ma***REMOVED***BodyLength` (Node only option) defines the ma***REMOVED*** size of the http request content in bytes allowed
  ma***REMOVED***BodyLength: 2000,

  // `validateStatus` defines whether to resolve or reject the promise for a given
  // HTTP response status code. If `validateStatus` returns `true` (or is set to `null`
  // or `undefined`), the promise will be resolved; otherwise, the promise will be
  // rejected.
  validateStatus: function (status) {
    return status >= 200 && status < 300; // default
  },

  // `ma***REMOVED***Redirects` defines the ma***REMOVED***imum number of redirects to follow in node.js.
  // If set to 0, no redirects will be followed.
  ma***REMOVED***Redirects: 21, // default

  // `beforeRedirect` defines a function that will be called before redirect.
  // Use this to adjust the request options upon redirecting,
  // to inspect the latest response headers,
  // or to cancel the request by throwing an error
  // If ma***REMOVED***Redirects is set to 0, `beforeRedirect` is not used.
  beforeRedirect: (options, { headers }) => {
    if (options.hostname === "e***REMOVED***ample.com") {
      options.auth = "user:password";
    }
  },

  // `socketPath` defines a UNIX Socket to be used in node.js.
  // e.g. '/var/run/docker.sock' to send requests to the docker daemon.
  // Only either `socketPath` or `pro***REMOVED***y` can be specified.
  // If both are specified, `socketPath` is used.
  socketPath: null, // default
  
  // `transport` determines the transport method that will be used to make the request. If defined, it will be used. Otherwise, if `ma***REMOVED***Redirects` is 0, the default `http` or `https` library will be used, depending on the protocol specified in `protocol`. Otherwise, the `httpFollow` or `httpsFollow` library will be used, again depending on the protocol, which can handle redirects.
  transport: undefined, // default

  // `httpAgent` and `httpsAgent` define a custom agent to be used when performing http
  // and https requests, respectively, in node.js. This allows options to be added like
  // `keepAlive` that are not enabled by default.
  httpAgent: new http.Agent({ keepAlive: true }),
  httpsAgent: new https.Agent({ keepAlive: true }),

  // `pro***REMOVED***y` defines the hostname, port, and protocol of the pro***REMOVED***y server.
  // You can also define your pro***REMOVED***y using the conventional `http_pro***REMOVED***y` and
  // `https_pro***REMOVED***y` environment variables. If you are using environment variables
  // for your pro***REMOVED***y configuration, you can also define a `no_pro***REMOVED***y` environment
  // variable as a comma-separated list of domains that should not be pro***REMOVED***ied.
  // Use `false` to disable pro***REMOVED***ies, ignoring environment variables.
  // `auth` indicates that HTTP Basic auth should be used to connect to the pro***REMOVED***y, and
  // supplies credentials.
  // This will set an `Pro***REMOVED***y-Authorization` header, overwriting any e***REMOVED***isting
  // `Pro***REMOVED***y-Authorization` custom headers you have set using `headers`.
  // If the pro***REMOVED***y server uses HTTPS, then you must set the protocol to `https`.
  pro***REMOVED***y: {
    protocol: 'https',
    host: '127.0.0.1',
    // hostname: '127.0.0.1' // Takes precedence over 'host' if both are defined
    port: 9000,
    auth: {
      username: 'mikeymike',
      password: 'rapunz3l'
    }
  },

  // `cancelToken` specifies a cancel token that can be used to cancel the request
  // (see Cancellation section below for details)
  cancelToken: new CancelToken(function (cancel) {
  }),

  // an alternative way to cancel A***REMOVED***ios requests using AbortController
  signal: new AbortController().signal,

  // `decompress` indicates whether or not the response body should be decompressed
  // automatically. If set to `true` will also remove the 'content-encoding' header
  // from the responses objects of all decompressed responses
  // - Node only (XHR cannot turn off decompression)
  decompress: true, // default

  // `insecureHTTPParser` boolean.
  // Indicates where to use an insecure HTTP parser that accepts invalid HTTP headers.
  // This may allow interoperability with non-conformant HTTP implementations.
  // Using the insecure parser should be avoided.
  // see options https://nodejs.org/dist/latest-v12.***REMOVED***/docs/api/http.html#http_http_request_url_options_callback
  // see also https://nodejs.org/en/blog/vulnerability/february-2020-security-releases/#strict-http-header-parsing-none
  insecureHTTPParser: undefined, // default

  // transitional options for backward compatibility that may be removed in the newer versions
  transitional: {
    // silent JSON parsing mode
    // `true`  - ignore JSON parsing errors and set response.data to null if parsing failed (old behaviour)
    // `false` - throw Synta***REMOVED***Error if JSON parsing failed (Note: responseType must be set to 'json')
    silentJSONParsing: true, // default value for the current A***REMOVED***ios version

    // try to parse the response string as JSON even if `responseType` is not 'json'
    forcedJSONParsing: true,

    // throw ETIMEDOUT error instead of generic ECONNABORTED on request timeouts
    clarifyTimeoutError: false,
  },

  env: {
    // The FormData class to be used to automatically serialize the payload into a FormData object
    FormData: window?.FormData || global?.FormData
  },

  formSerializer: {
      visitor: (value, key, path, helpers) => {}; // custom visitor function to serialize form values
      dots: boolean; // use dots instead of brackets format
      metaTokens: boolean; // keep special endings like {} in parameter key
      inde***REMOVED***es: boolean; // array inde***REMOVED***es format null - no brackets, false - empty brackets, true - brackets with inde***REMOVED***es
  },

  // http adapter only (node.js)
  ma***REMOVED***Rate: [
    100 * 1024, // 100KB/s upload limit,
    100 * 1024  // 100KB/s download limit
  ]
}
```

## Response Schema

The response for a request contains the following information.

```js
{
  // `data` is the response that was provided by the server
  data: {},

  // `status` is the HTTP status code from the server response
  status: 200,

  // `statusTe***REMOVED***t` is the HTTP status message from the server response
  statusTe***REMOVED***t: 'OK',

  // `headers` the HTTP headers that the server responded with
  // All header names are lowercase and can be accessed using the bracket notation.
  // E***REMOVED***ample: `response.headers['content-type']`
  headers: {},

  // `config` is the config that was provided to `a***REMOVED***ios` for the request
  config: {},

  // `request` is the request that generated this response
  // It is the last ClientRequest instance in node.js (in redirects)
  // and an XMLHttpRequest instance in the browser
  request: {}
}
```

When using `then`, you will receive the response as follows:

```js
a***REMOVED***ios.get('/user/12345')
  .then(function (response) {
    console.log(response.data);
    console.log(response.status);
    console.log(response.statusTe***REMOVED***t);
    console.log(response.headers);
    console.log(response.config);
  });
```

When using `catch`, or passing a [rejection callback](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/then) as second parameter of `then`, the response will be available through the `error` object as e***REMOVED***plained in the [Handling Errors](#handling-errors) section.

## Config Defaults

You can specify config defaults that will be applied to every request.

### Global a***REMOVED***ios defaults

```js
a***REMOVED***ios.defaults.baseURL = 'https://api.e***REMOVED***ample.com';

// Important: If a***REMOVED***ios is used with multiple domains, the AUTH_TOKEN will be sent to all of them.
// See below for an e***REMOVED***ample using Custom instance defaults instead.
a***REMOVED***ios.defaults.headers.common['Authorization'] = AUTH_TOKEN;

a***REMOVED***ios.defaults.headers.post['Content-Type'] = 'application/***REMOVED***-www-form-urlencoded';
```

### Custom instance defaults

```js
// Set config defaults when creating the instance
const instance = a***REMOVED***ios.create({
  baseURL: 'https://api.e***REMOVED***ample.com'
});

// Alter defaults after instance has been created
instance.defaults.headers.common['Authorization'] = AUTH_TOKEN;
```

### Config order of precedence

Config will be merged with an order of precedence. The order is library defaults found in [lib/defaults.js](https://github.com/a***REMOVED***ios/a***REMOVED***ios/blob/master/lib/defaults/inde***REMOVED***.js#L28), then `defaults` property of the instance, and finally `config` argument for the request. The latter will take precedence over the former. Here's an e***REMOVED***ample.

```js
// Create an instance using the config defaults provided by the library
// At this point the timeout config value is `0` as is the default for the library
const instance = a***REMOVED***ios.create();

// Override timeout default for the library
// Now all requests using this instance will wait 2.5 seconds before timing out
instance.defaults.timeout = 2500;

// Override timeout for this request as it's known to take a long time
instance.get('/longRequest', {
  timeout: 5000
});
```

## Interceptors

You can intercept requests or responses before they are handled by `then` or `catch`.

```js
// Add a request interceptor
a***REMOVED***ios.interceptors.request.use(function (config) {
    // Do something before request is sent
    return config;
  }, function (error) {
    // Do something with request error
    return Promise.reject(error);
  });

// Add a response interceptor
a***REMOVED***ios.interceptors.response.use(function (response) {
    // Any status code that lie within the range of 2***REMOVED******REMOVED*** cause this function to trigger
    // Do something with response data
    return response;
  }, function (error) {
    // Any status codes that falls outside the range of 2***REMOVED******REMOVED*** cause this function to trigger
    // Do something with response error
    return Promise.reject(error);
  });
```

If you need to remove an interceptor later you can.

```js
const myInterceptor = a***REMOVED***ios.interceptors.request.use(function () {/*...*/});
a***REMOVED***ios.interceptors.request.eject(myInterceptor);
```

You can also clear all interceptors for requests or responses.
```js
const instance = a***REMOVED***ios.create();
instance.interceptors.request.use(function () {/*...*/});
instance.interceptors.request.clear(); // Removes interceptors from requests
instance.interceptors.response.use(function () {/*...*/});
instance.interceptors.response.clear(); // Removes interceptors from responses
```

You can add interceptors to a custom instance of a***REMOVED***ios.

```js
const instance = a***REMOVED***ios.create();
instance.interceptors.request.use(function () {/*...*/});
```

When you add request interceptors, they are presumed to be asynchronous by default. This can cause a delay
in the e***REMOVED***ecution of your a***REMOVED***ios request when the main thread is blocked (a promise is created under the hood for
the interceptor and your request gets put on the bottom of the call stack). If your request interceptors are synchronous you can add a flag
to the options object that will tell a***REMOVED***ios to run the code synchronously and avoid any delays in request e***REMOVED***ecution.

```js
a***REMOVED***ios.interceptors.request.use(function (config) {
  config.headers.test = 'I am only a header!';
  return config;
}, null, { synchronous: true });
```

If you want to e***REMOVED***ecute a particular interceptor based on a runtime check,
you can add a `runWhen` function to the options object. The interceptor will not be e***REMOVED***ecuted **if and only if** the return
of `runWhen` is `false`. The function will be called with the config
object (don't forget that you can bind your own arguments to it as well.) This can be handy when you have an
asynchronous request interceptor that only needs to run at certain times.

```js
function onGetCall(config) {
  return config.method === 'get';
}
a***REMOVED***ios.interceptors.request.use(function (config) {
  config.headers.test = 'special get headers';
  return config;
}, null, { runWhen: onGetCall });
```

### Multiple Interceptors

Given you add multiple response interceptors
and when the response was fulfilled
- then each interceptor is e***REMOVED***ecuted
- then they are e***REMOVED***ecuted in the order they were added
- then only the last interceptor's result is returned
- then every interceptor receives the result of its predecessor
- and when the fulfillment-interceptor throws
    - then the following fulfillment-interceptor is not called
    - then the following rejection-interceptor is called
    - once caught, another following fulfill-interceptor is called again (just like in a promise chain).

Read [the interceptor tests](./test/specs/interceptors.spec.js) for seeing all this in code.

## Error Types

There are many different a***REMOVED***ios error messages that can appear that can provide basic information about the specifics of the error and where opportunities may lie in debugging.

The general structure of a***REMOVED***ios errors is as follows:
| Property  | Definition  |
| -------- | ----------  |
| message  | A quick summary of the error message and the status it failed with. |
| name     | This defines where the error originated from. For a***REMOVED***ios, it will always be an 'A***REMOVED***iosError'. |
| stack    | Provides the stack trace of the error. | 
| config   | An a***REMOVED***ios config object with specific instance configurations defined by the user from when the request was made |
| code     | Represents an a***REMOVED***ios identified error. The table below lists out specific definitions for internal a***REMOVED***ios error.  |
| status   | HTTP response status code. See [here](https://en.wikipedia.org/wiki/List_of_HTTP_status_codes) for common HTTP response status code meanings. 

Below is a list of potential a***REMOVED***ios identified error
| Code  |  Definition   |
| -------- | ----------  |
| ERR_BAD_OPTION_VALUE | Invalid or unsupported value provided in a***REMOVED***ios configuration. |
| ERR_BAD_OPTION | Invalid option provided in a***REMOVED***ios configuration. |
| ECONNABORTED | Request timed out due to e***REMOVED***ceeding timeout specified in a***REMOVED***ios configuration. |
| ETIMEDOUT | Request timed out due to e***REMOVED***ceeding default a***REMOVED***ios timelimit. |
| ERR_NETWORK | Network-related issue.
| ERR_FR_TOO_MANY_REDIRECTS | Request is redirected too many times; e***REMOVED***ceeds ma***REMOVED*** redirects specified in a***REMOVED***ios configuration.
| ERR_DEPRECATED | Deprecated feature or method used in a***REMOVED***ios. 
| ERR_BAD_RESPONSE | Response cannot be parsed properly or is in an une***REMOVED***pected format. 
| ERR_BAD_REQUEST | Requested has une***REMOVED***pected format or missing required parameters. |
| ERR_CANCELED | Feature or method is canceled e***REMOVED***plicitly by the user.   
| ERR_NOT_SUPPORT | Feature or method not supported in the current a***REMOVED***ios environment. 
| ERR_INVALID_URL | Invalid URL provided for a***REMOVED***ios request.

## Handling Errors

the default behavior is to reject every response that returns with a status code that falls out of the range of 2***REMOVED******REMOVED*** and treat it as an error.

```js
a***REMOVED***ios.get('/user/12345')
  .catch(function (error) {
    if (error.response) {
      // The request was made and the server responded with a status code
      // that falls out of the range of 2***REMOVED******REMOVED***
      console.log(error.response.data);
      console.log(error.response.status);
      console.log(error.response.headers);
    } else if (error.request) {
      // The request was made but no response was received
      // `error.request` is an instance of XMLHttpRequest in the browser and an instance of
      // http.ClientRequest in node.js
      console.log(error.request);
    } else {
      // Something happened in setting up the request that triggered an Error
      console.log('Error', error.message);
    }
    console.log(error.config);
  });
```

Using the `validateStatus` config option, you can override the default condition (status >= 200 && status < 300) and define HTTP code(s) that should throw an error.

```js
a***REMOVED***ios.get('/user/12345', {
  validateStatus: function (status) {
    return status < 500; // Resolve only if the status code is less than 500
  }
})
```

Using `toJSON` you get an object with more information about the HTTP error.

```js
a***REMOVED***ios.get('/user/12345')
  .catch(function (error) {
    console.log(error.toJSON());
  });
```

## Cancellation

### AbortController

Starting from `v0.22.0` A***REMOVED***ios supports AbortController to cancel requests in fetch API way:

```js
const controller = new AbortController();

a***REMOVED***ios.get('/foo/bar', {
   signal: controller.signal
}).then(function(response) {
   //...
});
// cancel the request
controller.abort()
```

### CancelToken `ðŸ‘Ždeprecated`

You can also cancel a request using a *CancelToken*.

> The a***REMOVED***ios cancel token API is based on the withdrawn [cancellable promises proposal](https://github.com/tc39/proposal-cancelable-promises).

> This API is deprecated since v0.22.0 and shouldn't be used in new projects

You can create a cancel token using the `CancelToken.source` factory as shown below:

```js
const CancelToken = a***REMOVED***ios.CancelToken;
const source = CancelToken.source();

a***REMOVED***ios.get('/user/12345', {
  cancelToken: source.token
}).catch(function (thrown) {
  if (a***REMOVED***ios.isCancel(thrown)) {
    console.log('Request canceled', thrown.message);
  } else {
    // handle error
  }
});

a***REMOVED***ios.post('/user/12345', {
  name: 'new name'
}, {
  cancelToken: source.token
})

// cancel the request (the message parameter is optional)
source.cancel('Operation canceled by the user.');
```

You can also create a cancel token by passing an e***REMOVED***ecutor function to the `CancelToken` constructor:

```js
const CancelToken = a***REMOVED***ios.CancelToken;
let cancel;

a***REMOVED***ios.get('/user/12345', {
  cancelToken: new CancelToken(function e***REMOVED***ecutor(c) {
    // An e***REMOVED***ecutor function receives a cancel function as a parameter
    cancel = c;
  })
});

// cancel the request
cancel();
```

> **Note:** you can cancel several requests with the same cancel token/abort controller.
> If a cancellation token is already cancelled at the moment of starting an A***REMOVED***ios request, then the request is cancelled immediately, without any attempts to make a real request.

> During the transition period, you can use both cancellation APIs, even for the same request:

## Using `application/***REMOVED***-www-form-urlencoded` format

### URLSearchParams

By default, a***REMOVED***ios serializes JavaScript objects to `JSON`. To send data in the [`application/***REMOVED***-www-form-urlencoded` format](https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/POST) instead, you can use the [`URLSearchParams`](https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams) API, which is [supported](http://www.caniuse.com/#feat=urlsearchparams) in the vast majority of browsers,and [ Node](https://nodejs.org/api/url.html#url_class_urlsearchparams) starting with v10 (released in 2018).

```js
const params = new URLSearchParams({ foo: 'bar' });
params.append('e***REMOVED***traparam', 'value');
a***REMOVED***ios.post('/foo', params);
```

### Query string (Older browsers)

For compatibility with very old browsers, there is a [polyfill](https://github.com/WebReflection/url-search-params) available (make sure to polyfill the global environment).

Alternatively, you can encode data using the [`qs`](https://github.com/ljharb/qs) library:

```js
const qs = require('qs');
a***REMOVED***ios.post('/foo', qs.stringify({ 'bar': 123 }));
```

Or in another way (ES6),

```js
import qs from 'qs';
const data = { 'bar': 123 };
const options = {
  method: 'POST',
  headers: { 'content-type': 'application/***REMOVED***-www-form-urlencoded' },
  data: qs.stringify(data),
  url,
};
a***REMOVED***ios(options);
```

### Older Node.js versions

For older Node.js engines, you can use the [`querystring`](https://nodejs.org/api/querystring.html) module as follows:

```js
const querystring = require('querystring');
a***REMOVED***ios.post('https://something.com/', querystring.stringify({ foo: 'bar' }));
```

You can also use the [`qs`](https://github.com/ljharb/qs) library.

> **Note**: The `qs` library is preferable if you need to stringify nested objects, as the `querystring` method has [known issues](https://github.com/nodejs/node-v0.***REMOVED***-archive/issues/1665) with that use case.

### ðŸ†• Automatic serialization to URLSearchParams

A***REMOVED***ios will automatically serialize the data object to urlencoded format if the content-type header is set to "application/***REMOVED***-www-form-urlencoded".

```js
const data = {
  ***REMOVED***: 1,
  arr: [1, 2, 3],
  arr2: [1, [2], 3],
  users: [{name: 'Peter', surname: 'Griffin'}, {name: 'Thomas', surname: 'Anderson'}],
};

await a***REMOVED***ios.postForm('https://postman-echo.com/post', data,
  {headers: {'content-type': 'application/***REMOVED***-www-form-urlencoded'}}
);
```

The server will handle it as:

```js
  {
    ***REMOVED***: '1',
    'arr[]': [ '1', '2', '3' ],
    'arr2[0]': '1',
    'arr2[1][0]': '2',
    'arr2[2]': '3',
    'arr3[]': [ '1', '2', '3' ],
    'users[0][name]': 'Peter',
    'users[0][surname]': 'griffin',
    'users[1][name]': 'Thomas',
    'users[1][surname]': 'Anderson'
  }
````

If your backend body-parser (like `body-parser` of `e***REMOVED***press.js`) supports nested objects decoding, you will get the same object on the server-side automatically

```js
  var app = e***REMOVED***press();

  app.use(bodyParser.urlencoded({ e***REMOVED***tended: true })); // support encoded bodies

  app.post('/', function (req, res, ne***REMOVED***t) {
     // echo body as JSON
     res.send(JSON.stringify(req.body));
  });

  server = app.listen(3000);
```

## Using `multipart/form-data` format

### FormData

To send the data as a `multipart/formdata` you need to pass a formData instance as a payload.
Setting the `Content-Type` header is not required as A***REMOVED***ios guesses it based on the payload type.

```js
const formData = new FormData();
formData.append('foo', 'bar');

a***REMOVED***ios.post('https://httpbin.org/post', formData);
```

In node.js, you can use the [`form-data`](https://github.com/form-data/form-data) library as follows:

```js
const FormData = require('form-data');

const form = new FormData();
form.append('my_field', 'my value');
form.append('my_buffer', new Buffer(10));
form.append('my_file', fs.createReadStream('/foo/bar.jpg'));

a***REMOVED***ios.post('https://e***REMOVED***ample.com', form)
```

### ðŸ†• Automatic serialization to FormData

Starting from `v0.27.0`, A***REMOVED***ios supports automatic object serialization to a FormData object if the request `Content-Type`
header is set to `multipart/form-data`.

The following request will submit the data in a FormData format (Browser & Node.js):

```js
import a***REMOVED***ios from 'a***REMOVED***ios';

a***REMOVED***ios.post('https://httpbin.org/post', {***REMOVED***: 1}, {
  headers: {
    'Content-Type': 'multipart/form-data'
  }
}).then(({data}) => console.log(data));
```

In the `node.js` build, the ([`form-data`](https://github.com/form-data/form-data)) polyfill is used by default.

You can overload the FormData class by setting the `env.FormData` config variable,
but you probably won't need it in most cases:

```js
const a***REMOVED***ios = require('a***REMOVED***ios');
var FormData = require('form-data');

a***REMOVED***ios.post('https://httpbin.org/post', {***REMOVED***: 1, buf: new Buffer(10)}, {
  headers: {
    'Content-Type': 'multipart/form-data'
  }
}).then(({data}) => console.log(data));
```

A***REMOVED***ios FormData serializer supports some special endings to perform the following operations:

- `{}` - serialize the value with JSON.stringify
- `[]` - unwrap the array-like object as separate fields with the same key

> **Note**: unwrap/e***REMOVED***pand operation will be used by default on arrays and FileList objects

FormData serializer supports additional options via `config.formSerializer: object` property to handle rare cases:

- `visitor: Function` - user-defined visitor function that will be called recursively to serialize the data object
to a `FormData` object by following custom rules.

- `dots: boolean = false` - use dot notation instead of brackets to serialize arrays and objects;

- `metaTokens: boolean = true` - add the special ending (e.g `user{}: '{"name": "John"}'`) in the FormData key.
The back-end body-parser could potentially use this meta-information to automatically parse the value as JSON.

- `inde***REMOVED***es: null|false|true = false` - controls how inde***REMOVED***es will be added to unwrapped keys of `flat` array-like objects

    - `null` - don't add brackets (`arr: 1`, `arr: 2`, `arr: 3`)
    - `false`(default) - add empty brackets (`arr[]: 1`, `arr[]: 2`, `arr[]: 3`)
    - `true` - add brackets with inde***REMOVED***es  (`arr[0]: 1`, `arr[1]: 2`, `arr[2]: 3`)

Let's say we have an object like this one:

```js
const obj = {
  ***REMOVED***: 1,
  arr: [1, 2, 3],
  arr2: [1, [2], 3],
  users: [{name: 'Peter', surname: 'Griffin'}, {name: 'Thomas', surname: 'Anderson'}],
  'obj2{}': [{***REMOVED***:1}]
};
```

The following steps will be e***REMOVED***ecuted by the A***REMOVED***ios serializer internally:

```js
const formData = new FormData();
formData.append('***REMOVED***', '1');
formData.append('arr[]', '1');
formData.append('arr[]', '2');
formData.append('arr[]', '3');
formData.append('arr2[0]', '1');
formData.append('arr2[1][0]', '2');
formData.append('arr2[2]', '3');
formData.append('users[0][name]', 'Peter');
formData.append('users[0][surname]', 'Griffin');
formData.append('users[1][name]', 'Thomas');
formData.append('users[1][surname]', 'Anderson');
formData.append('obj2{}', '[{"***REMOVED***":1}]');
```

A***REMOVED***ios supports the following shortcut methods: `postForm`, `putForm`, `patchForm`
which are just the corresponding http methods with the `Content-Type` header preset to `multipart/form-data`.

## Files Posting

You can easily submit a single file:

```js
await a***REMOVED***ios.postForm('https://httpbin.org/post', {
  'myVar' : 'foo',
  'file': document.querySelector('#fileInput').files[0]
});
```

or multiple files as `multipart/form-data`:

```js
await a***REMOVED***ios.postForm('https://httpbin.org/post', {
  'files[]': document.querySelector('#fileInput').files
});
```

`FileList` object can be passed directly:

```js
await a***REMOVED***ios.postForm('https://httpbin.org/post', document.querySelector('#fileInput').files)
```

All files will be sent with the same field names: `files[]`.

## ðŸ†• HTML Form Posting (browser)

Pass HTML Form element as a payload to submit it as `multipart/form-data` content.

```js
await a***REMOVED***ios.postForm('https://httpbin.org/post', document.querySelector('#htmlForm'));
```

`FormData` and `HTMLForm` objects can also be posted as `JSON` by e***REMOVED***plicitly setting the `Content-Type` header to `application/json`:

```js
await a***REMOVED***ios.post('https://httpbin.org/post', document.querySelector('#htmlForm'), {
  headers: {
    'Content-Type': 'application/json'
  }
})
```

For e***REMOVED***ample, the Form

```html
<form id="form">
  <input type="te***REMOVED***t" name="foo" value="1">
  <input type="te***REMOVED***t" name="deep.prop" value="2">
  <input type="te***REMOVED***t" name="deep prop spaced" value="3">
  <input type="te***REMOVED***t" name="baz" value="4">
  <input type="te***REMOVED***t" name="baz" value="5">

  <select name="user.age">
    <option value="value1">Value 1</option>
    <option value="value2" selected>Value 2</option>
    <option value="value3">Value 3</option>
  </select>

  <input type="submit" value="Save">
</form>
```

will be submitted as the following JSON object:

```js
{
  "foo": "1",
  "deep": {
    "prop": {
      "spaced": "3"
    }
  },
  "baz": [
    "4",
    "5"
  ],
  "user": {
    "age": "value2"
  }
}
````

Sending `Blobs`/`Files` as JSON (`base64`) is not currently supported.

## ðŸ†• Progress capturing

A***REMOVED***ios supports both browser and node environments to capture request upload/download progress.
The frequency of progress events is forced to be limited to `3` times per second.

```js    
await a***REMOVED***ios.post(url, data, {
  onUploadProgress: function (a***REMOVED***iosProgressEvent) {
    /*{
      loaded: number;
      total?: number;
      progress?: number; // in range [0..1]
      bytes: number; // how many bytes have been transferred since the last trigger (delta)
      estimated?: number; // estimated time in seconds
      rate?: number; // upload speed in bytes
      upload: true; // upload sign
    }*/
  },

  onDownloadProgress: function (a***REMOVED***iosProgressEvent) {
    /*{
      loaded: number;
      total?: number;
      progress?: number;
      bytes: number; 
      estimated?: number;
      rate?: number; // download speed in bytes
      download: true; // download sign
    }*/
  }
});  
```

You can also track stream upload/download progress in node.js:

```js
const {data} = await a***REMOVED***ios.post(SERVER_URL, readableStream, {
   onUploadProgress: ({progress}) => {
     console.log((progress * 100).toFi***REMOVED***ed(2));
   },
  
   headers: {
    'Content-Length': contentLength
   },

   ma***REMOVED***Redirects: 0 // avoid buffering the entire stream
});
````

> **Note:**
> Capturing FormData upload progress is not currently supported in node.js environments.

> **âš ï¸ Warning**
> It is recommended to disable redirects by setting ma***REMOVED***Redirects: 0 to upload the stream in the **node.js** environment,
> as follow-redirects package will buffer the entire stream in RAM without following the "backpressure" algorithm.


## ðŸ†• Rate limiting

Download and upload rate limits can only be set for the http adapter (node.js):

```js
const {data} = await a***REMOVED***ios.post(LOCAL_SERVER_URL, myBuffer, {
  onUploadProgress: ({progress, rate}) => {
    console.log(`Upload [${(progress*100).toFi***REMOVED***ed(2)}%]: ${(rate / 1024).toFi***REMOVED***ed(2)}KB/s`)
  },
   
  ma***REMOVED***Rate: [100 * 1024], // 100KB/s limit
});
```

## ðŸ†• A***REMOVED***iosHeaders

A***REMOVED***ios has its own `A***REMOVED***iosHeaders` class to manipulate headers using a Map-like API that guarantees caseless work.
Although HTTP is case-insensitive in headers, A***REMOVED***ios will retain the case of the original header for stylistic reasons
and for a workaround when servers mistakenly consider the header's case.
The old approach of directly manipulating headers object is still available, but deprecated and not recommended for future usage.

### Working with headers

An A***REMOVED***iosHeaders object instance can contain different types of internal values. that control setting and merging logic.
The final headers object with string values is obtained by A***REMOVED***ios by calling the `toJSON` method.

> Note: By JSON here we mean an object consisting only of string values intended to be sent over the network.

The header value can be one of the following types:
- `string` - normal string value that will be sent to the server
- `null` - skip header when rendering to JSON
- `false` - skip header when rendering to JSON, additionally indicates that `set` method must be called with `rewrite` option set to `true`
  to overwrite this value (A***REMOVED***ios uses this internally to allow users to opt out of installing certain headers like `User-Agent` or `Content-Type`)
- `undefined` - value is not set

> Note: The header value is considered set if it is not equal to undefined.

The headers object is always initialized inside interceptors and transformers:

```ts
  a***REMOVED***ios.interceptors.request.use((request: InternalA***REMOVED***iosRequestConfig) => {
      request.headers.set('My-header', 'value');

      request.headers.set({
        "My-set-header1": "my-set-value1",
        "My-set-header2": "my-set-value2"
      });
      
      request.headers.set('User-Agent', false); // disable subsequent setting the header by A***REMOVED***ios

      request.headers.setContentType('te***REMOVED***t/plain');
    
      request.headers['My-set-header2'] = 'newValue' // direct access is deprecated
    
      return request;
    }
  );
````

You can iterate over an `A***REMOVED***iosHeaders` instance using a `for...of` statement:

````js
const headers = new A***REMOVED***iosHeaders({
  foo: '1',
  bar: '2',
  baz: '3'
});

for(const [header, value] of headers) {
  console.log(header, value);
}

// foo 1
// bar 2
// baz 3
````

### new A***REMOVED***iosHeaders(headers?)

Constructs a new `A***REMOVED***iosHeaders` instance. 

```
constructor(headers?: RawA***REMOVED***iosHeaders | A***REMOVED***iosHeaders | string);
```

If the headers object is a string, it will be parsed as RAW HTTP headers.

````js
const headers = new A***REMOVED***iosHeaders(`
Host: www.bing.com
User-Agent: curl/7.54.0
Accept: */*`);

console.log(headers);

// Object [A***REMOVED***iosHeaders] {
//   host: 'www.bing.com',
//   'user-agent': 'curl/7.54.0',
//   accept: '*/*'
// }
````

### A***REMOVED***iosHeaders#set

```ts
set(headerName, value: A***REMOVED***ios, rewrite?: boolean);
set(headerName, value, rewrite?: (this: A***REMOVED***iosHeaders, value: string, name: string, headers: RawA***REMOVED***iosHeaders) => boolean);
set(headers?: RawA***REMOVED***iosHeaders | A***REMOVED***iosHeaders | string, rewrite?: boolean);
```

The `rewrite` argument controls the overwriting behavior:
- `false` - do not overwrite if header's value is set (is not `undefined`)
- `undefined` (default) - overwrite the header unless its value is set to `false`
- `true` - rewrite anyway

The option can also accept a user-defined function that determines whether the value should be overwritten or not.

Returns `this`.

### A***REMOVED***iosHeaders#get(header)

```
  get(headerName: string, matcher?: true | A***REMOVED***iosHeaderMatcher): A***REMOVED***iosHeaderValue;
  get(headerName: string, parser: RegE***REMOVED***p): RegE***REMOVED***pE***REMOVED***ecArray | null;
````

Returns the internal value of the header. It can take an e***REMOVED***tra argument to parse the header's value with `RegE***REMOVED***p.e***REMOVED***ec`,
matcher function or internal key-value parser.

```ts
const headers = new A***REMOVED***iosHeaders({
  'Content-Type': 'multipart/form-data; boundary=Asrf456BGe4h'
});

console.log(headers.get('Content-Type')); 
// multipart/form-data; boundary=Asrf456BGe4h

console.log(headers.get('Content-Type', true)); // parse key-value pairs from a string separated with \s,;= delimiters:
// [Object: null prototype] {
//   'multipart/form-data': undefined,
//    boundary: 'Asrf456BGe4h'
// }


console.log(headers.get('Content-Type', (value, name, headers) => {
  return String(value).replace(/a/g, 'ZZZ');
}));
// multipZZZrt/form-dZZZtZZZ; boundZZZry=Asrf456BGe4h

console.log(headers.get('Content-Type', /boundary=(\w+)/)?.[0]);
// boundary=Asrf456BGe4h

```

Returns the value of the header.

### A***REMOVED***iosHeaders#has(header, matcher?)

```
has(header: string, matcher?: A***REMOVED***iosHeaderMatcher): boolean;
```

Returns `true` if the header is set (has no `undefined` value).

### A***REMOVED***iosHeaders#delete(header, matcher?)

```
delete(header: string | string[], matcher?: A***REMOVED***iosHeaderMatcher): boolean;
```

Returns `true` if at least one header has been removed.

### A***REMOVED***iosHeaders#clear(matcher?)

```
clear(matcher?: A***REMOVED***iosHeaderMatcher): boolean;
```

Removes all headers. 
Unlike the `delete` method matcher, this optional matcher will be used to match against the header name rather than the value.

```ts
const headers = new A***REMOVED***iosHeaders({
  'foo': '1',
  '***REMOVED***-foo': '2',
  '***REMOVED***-bar': '3',
});

console.log(headers.clear(/^***REMOVED***-/)); // true

console.log(headers.toJSON()); // [Object: null prototype] { foo: '1' }
```

Returns `true` if at least one header has been cleared.

### A***REMOVED***iosHeaders#normalize(format);

If the headers object was changed directly, it can have duplicates with the same name but in different cases.
This method normalizes the headers object by combining duplicate keys into one.
A***REMOVED***ios uses this method internally after calling each interceptor.
Set `format` to true for converting headers name to lowercase and capitalize the initial letters (`cOntEnt-type` => `Content-Type`)

```js
const headers = new A***REMOVED***iosHeaders({
  'foo': '1',
});

headers.Foo = '2';
headers.FOO = '3';

console.log(headers.toJSON()); // [Object: null prototype] { foo: '1', Foo: '2', FOO: '3' }
console.log(headers.normalize().toJSON()); // [Object: null prototype] { foo: '3' }
console.log(headers.normalize(true).toJSON()); // [Object: null prototype] { Foo: '3' }
```

Returns `this`.

### A***REMOVED***iosHeaders#concat(...targets)

```
concat(...targets: Array<A***REMOVED***iosHeaders | RawA***REMOVED***iosHeaders | string | undefined | null>): A***REMOVED***iosHeaders;
```

Merges the instance with targets into a new `A***REMOVED***iosHeaders` instance. If the target is a string, it will be parsed as RAW HTTP headers.

Returns a new `A***REMOVED***iosHeaders` instance.

### A***REMOVED***iosHeaders#toJSON(asStrings?)

````
toJSON(asStrings?: boolean): RawA***REMOVED***iosHeaders;
````

Resolve all internal headers values into a new null prototype object. 
Set `asStrings` to true to resolve arrays as a string containing all elements, separated by commas.

### A***REMOVED***iosHeaders.from(thing?)

````
from(thing?: A***REMOVED***iosHeaders | RawA***REMOVED***iosHeaders | string): A***REMOVED***iosHeaders;
````

Returns a new `A***REMOVED***iosHeaders` instance created from the raw headers passed in,
or simply returns the given headers object if it's an `A***REMOVED***iosHeaders` instance.

### A***REMOVED***iosHeaders.concat(...targets)

````
concat(...targets: Array<A***REMOVED***iosHeaders | RawA***REMOVED***iosHeaders | string | undefined | null>): A***REMOVED***iosHeaders;
````

Returns a new `A***REMOVED***iosHeaders` instance created by merging the target objects.

### Shortcuts

The following shortcuts are available:

- `setContentType`, `getContentType`, `hasContentType`

- `setContentLength`, `getContentLength`, `hasContentLength`

- `setAccept`, `getAccept`, `hasAccept`

- `setUserAgent`, `getUserAgent`, `hasUserAgent`

- `setContentEncoding`, `getContentEncoding`, `hasContentEncoding`

## ðŸ”¥ Fetch adapter

Fetch adapter was introduced in `v1.7.0`. By default, it will be used if `***REMOVED***hr` and `http` adapters are not available in the build,
or not supported by the environment.
To use it by default, it must be selected e***REMOVED***plicitly:

```js
const {data} = a***REMOVED***ios.get(url, {
  adapter: 'fetch' // by default ['***REMOVED***hr', 'http', 'fetch']
})
```

You can create a separate instance for this:

```js
const fetchA***REMOVED***ios = a***REMOVED***ios.create({
  adapter: 'fetch'
});

const {data} = fetchA***REMOVED***ios.get(url);
```

The adapter supports the same functionality as `***REMOVED***hr` adapter, **including upload and download progress capturing**. 
Also, it supports additional response types such as `stream` and `formdata` (if supported by the environment).

## Semver

Until a***REMOVED***ios reaches a `1.0` release, breaking changes will be released with a new minor version. For e***REMOVED***ample `0.5.1`, and `0.5.4` will have the same API, but `0.6.0` will have breaking changes.

## Promises

a***REMOVED***ios depends on a native ES6 Promise implementation to be [supported](https://caniuse.com/promises).
If your environment doesn't support ES6 Promises, you can [polyfill](https://github.com/jakearchibald/es6-promise).

## TypeScript

a***REMOVED***ios includes [TypeScript](https://typescriptlang.org) definitions and a type guard for a***REMOVED***ios errors.

```typescript
let user: User = null;
try {
  const { data } = await a***REMOVED***ios.get('/user?ID=12345');
  user = data.userDetails;
} catch (error) {
  if (a***REMOVED***ios.isA***REMOVED***iosError(error)) {
    handleA***REMOVED***iosError(error);
  } else {
    handleUne***REMOVED***pectedError(error);
  }
}
```

Because a***REMOVED***ios dual publishes with an ESM default e***REMOVED***port and a CJS `module.e***REMOVED***ports`, there are some caveats.
The recommended setting is to use `"moduleResolution": "node16"` (this is implied by `"module": "node16"`). Note that this requires TypeScript 4.7 or greater.
If use ESM, your settings should be fine.
If you compile TypeScript to CJS and you canâ€™t use `"moduleResolution": "node 16"`, you have to enable `esModuleInterop`.
If you use TypeScript to type check CJS JavaScript code, your only option is to use `"moduleResolution": "node16"`.

## Online one-click setup

You can use Gitpod, an online IDE(which is free for Open Source) for contributing or running the e***REMOVED***amples online.

[![Open in Gitpod](https://gitpod.io/button/open-in-gitpod.svg)](https://gitpod.io/#https://github.com/a***REMOVED***ios/a***REMOVED***ios/blob/main/e***REMOVED***amples/server.js)


## Resources

* [Changelog](https://github.com/a***REMOVED***ios/a***REMOVED***ios/blob/v1.***REMOVED***/CHANGELOG.md)
* [Ecosystem](https://github.com/a***REMOVED***ios/a***REMOVED***ios/blob/v1.***REMOVED***/ECOSYSTEM.md)
* [Contributing Guide](https://github.com/a***REMOVED***ios/a***REMOVED***ios/blob/v1.***REMOVED***/CONTRIBUTING.md)
* [Code of Conduct](https://github.com/a***REMOVED***ios/a***REMOVED***ios/blob/v1.***REMOVED***/CODE_OF_CONDUCT.md)

## Credits

a***REMOVED***ios is heavily inspired by the [$http service](https://docs.angularjs.org/api/ng/service/$http) provided in [AngularJS](https://angularjs.org/). Ultimately a***REMOVED***ios is an effort to provide a standalone `$http`-like service for use outside of AngularJS.

## License

[MIT](LICENSE)
