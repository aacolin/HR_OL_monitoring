language: node_js
node_js:
- 6
- 8
- 10
cache:
  directories:
  - node_modules
sudo: false
services:
  - ***REMOVED***vfb
install:
- npm -g install npm@5.10
- npm install
- npm prune
script: "./travis_tests.sh"
after_success:
- npm run coveralls
jobs:
  include:
  - node_js: 8
    env: TEST_SUITE=browser
  - stage: npm release
    script: echo "Publishing to npm..."
    node_js: 8
    if: tag =~ ^v\d+\.\d+\.\d+$
    deploy:
      provider: npm
      email: engineering+npm@particle.io
      api_key:
        secure: JzhJNTYb5bZmETc+MN7ivqeXTSUPMJ+ImGtiSXMFPNGnZc8PSwp82Q9Y***REMOVED***+cvno/8sSGaisleIcWDJ/4d9Vq6fNVchftu2tjCIauRUaQUf07tvO2bXW9HWmTaYCpySmvHsZD+v3FFOPEyWwkHWBGO0pQnlWOlPeJrzrpyp006uoh7shefK147zKwwUmZKJC0/VDbGOyWXeDXe1C0Aapw***REMOVED***FovTaINir4OROmPCrmUX0ZzWQqWn6edyYZHMDDLLrAIywqiuj1f7MU5M4y+0lILVm0SC79***REMOVED***7fIm6ZnIk+V1K***REMOVED***bNYN1zrKAFLkGSRpVXbNPUULT/j***REMOVED***VFn+ThcSNidQf3cI5kX6sXfQLN8ue7MfMAYCcL3JZ4W0LkrsYn4RqC5t8D4VATTqsNMUn+oUDzgDm8NL8hW+RaE9hLkXEGz9NjMpXie4JThcJt/To6NEGDMd0hvzBcvKTG34***REMOVED***gsitM1XBnOe6uk/L4l***REMOVED***058hRshnI***REMOVED***HkctyvVQ/dZfHrRfTz6CkfC3UhSaw7ufK***REMOVED***BCceDId/DM2WDL2eUyy+ruJTbWhjbJv/GUBhR69atYriEqGmRmZSiA5nvj2+vTT6yrD0RbHi/CqhiEMFcZf3DI+mIrjXjmbvdKdt0cDUHaz***REMOVED******REMOVED***GSmU3S0EV+Qdvbv1pZ***REMOVED***U/049WAnJWiw***REMOVED***wXHdpl9T6jZLw2e8d/***REMOVED***Ys=
      skip_cleanup: true
      on:
        tags: true
