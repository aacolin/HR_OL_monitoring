// Serve files from the fi***REMOVED***ture folder
import e***REMOVED***press from 'e***REMOVED***press';
import * as fi***REMOVED***tures from '../fi***REMOVED***tures';


e***REMOVED***port default class Fi***REMOVED***tureHttpServer {
	constructor(){
		this.app = e***REMOVED***press();
		this.app.get('/:filename', (req, res) => {
			res.writeHead(200, { 'Content-Type': 'application/octet-stream' });
			res.end(fi***REMOVED***tures.read(req.params['filename']), 'binary');
		});
	}

	// Call in a before() test hook
	listen(){
		return new Promise(fulfill => {
			this.server = this.app.listen(0, fulfill);
		});
	}

	url(){
		return `http://localhost:${this.server.address().port}`;
	}
}
