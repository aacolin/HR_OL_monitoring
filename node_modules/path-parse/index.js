'use strict';

var isWindows = process.platform === 'win32';

// Rege***REMOVED*** to split a windows path into into [dir, root, basename, name, e***REMOVED***t]
var splitWindowsRe =
    /^(((?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?[\\\/]?)(?:[^\\\/]*[\\\/])*)((\.{1,2}|[^\\\/]+?|)(\.[^.\/\\]*|))[\\\/]*$/;

var win32 = {};

function win32SplitPath(filename) {
  return splitWindowsRe.e***REMOVED***ec(filename).slice(1);
}

win32.parse = function(pathString) {
  if (typeof pathString !== 'string') {
    throw new TypeError(
        "Parameter 'pathString' must be a string, not " + typeof pathString
    );
  }
  var allParts = win32SplitPath(pathString);
  if (!allParts || allParts.length !== 5) {
    throw new TypeError("Invalid path '" + pathString + "'");
  }
  return {
    root: allParts[1],
    dir: allParts[0] === allParts[1] ? allParts[0] : allParts[0].slice(0, -1),
    base: allParts[2],
    e***REMOVED***t: allParts[4],
    name: allParts[3]
  };
};



// Split a filename into [dir, root, basename, name, e***REMOVED***t], uni***REMOVED*** version
// 'root' is just a slash, or nothing.
var splitPathRe =
    /^((\/?)(?:[^\/]*\/)*)((\.{1,2}|[^\/]+?|)(\.[^.\/]*|))[\/]*$/;
var posi***REMOVED*** = {};


function posi***REMOVED***SplitPath(filename) {
  return splitPathRe.e***REMOVED***ec(filename).slice(1);
}


posi***REMOVED***.parse = function(pathString) {
  if (typeof pathString !== 'string') {
    throw new TypeError(
        "Parameter 'pathString' must be a string, not " + typeof pathString
    );
  }
  var allParts = posi***REMOVED***SplitPath(pathString);
  if (!allParts || allParts.length !== 5) {
    throw new TypeError("Invalid path '" + pathString + "'");
  }
  
  return {
    root: allParts[1],
    dir: allParts[0].slice(0, -1),
    base: allParts[2],
    e***REMOVED***t: allParts[4],
    name: allParts[3],
  };
};


if (isWindows)
  module.e***REMOVED***ports = win32.parse;
else /* posi***REMOVED*** */
  module.e***REMOVED***ports = posi***REMOVED***.parse;

module.e***REMOVED***ports.posi***REMOVED*** = posi***REMOVED***.parse;
module.e***REMOVED***ports.win32 = win32.parse;
