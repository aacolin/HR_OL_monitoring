"use strict";

/**
 * Module dependencies.
 */
var util = require('util');

var Stream = require('stream');

var ResponseBase = require('../response-base');
/**
 * E***REMOVED***pose `Response`.
 */


module.e***REMOVED***ports = Response;
/**
 * Initialize a new `Response` with the given `***REMOVED***hr`.
 *
 *  - set flags (.ok, .error, etc)
 *  - parse header
 *
 * @param {Request} req
 * @param {Object} options
 * @constructor
 * @e***REMOVED***tends {Stream}
 * @implements {ReadableStream}
 * @api private
 */

function Response(req) {
  Stream.call(this);
  this.res = req.res;
  var res = this.res;
  this.request = req;
  this.req = req.req;
  this.te***REMOVED***t = res.te***REMOVED***t;
  this.body = res.body === undefined ? {} : res.body;
  this.files = res.files || {};
  this.buffered = req._resBuffered;
  this.headers = res.headers;
  this.header = this.headers;

  this._setStatusProperties(res.statusCode);

  this._setHeaderProperties(this.header);

  this.setEncoding = res.setEncoding.bind(res);
  res.on('data', this.emit.bind(this, 'data'));
  res.on('end', this.emit.bind(this, 'end'));
  res.on('close', this.emit.bind(this, 'close'));
  res.on('error', this.emit.bind(this, 'error'));
}
/**
 * Inherit from `Stream`.
 */


util.inherits(Response, Stream); // eslint-disable-ne***REMOVED***t-line new-cap

ResponseBase(Response.prototype);
/**
 * Implements methods of a `ReadableStream`
 */

Response.prototype.destroy = function (err) {
  this.res.destroy(err);
};
/**
 * Pause.
 */


Response.prototype.pause = function () {
  this.res.pause();
};
/**
 * Resume.
 */


Response.prototype.resume = function () {
  this.res.resume();
};
/**
 * Return an `Error` representative of this response.
 *
 * @return {Error}
 * @api public
 */


Response.prototype.toError = function () {
  var req = this.req;
  var method = req.method;
  var path = req.path;
  var msg = "cannot ".concat(method, " ").concat(path, " (").concat(this.status, ")");
  var err = new Error(msg);
  err.status = this.status;
  err.te***REMOVED***t = this.te***REMOVED***t;
  err.method = method;
  err.path = path;
  return err;
};

Response.prototype.setStatusProperties = function (status) {
  console.warn('In superagent 2.***REMOVED*** setStatusProperties is a private method');
  return this._setStatusProperties(status);
};
/**
 * To json.
 *
 * @return {Object}
 * @api public
 */


Response.prototype.toJSON = function () {
  return {
    req: this.request.toJSON(),
    header: this.header,
    status: this.status,
    te***REMOVED***t: this.te***REMOVED***t
  };
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9ub2RlL3Jlc3BvbnNlLmpzIl0sIm5hbWVzIjpbInV0aWwiLCJyZXF1aXJlIiwiU3RyZWFtIiwiUmVzcG9uc2VCYXNlIiwibW9kdW***REMOVED***lIiwiZXhwb3J0cyIsIlJlc3BvbnNlIiwicmV***REMOVED***IiwiY2FsbCIsInJlcyIsInJlcXVlc3QiLCJ0ZXh0IiwiYm9keSIsInVuZGVmaW5lZCIsImZpbGVzIiwiYnVmZmVyZWQiLCJfcmVzQnVmZmVyZWQiLCJoZWFkZXJzIiwiaGVhZGVyIiwiX3NldFN0YXR1c1Byb3BlcnRpZXMiLCJzdGF0dXNDb2RlIiwiX3NldEhlYWRlclByb3BlcnRpZXMiLCJzZXRFbmNvZGluZyIsImJpbmQiLCJvbiIsImVtaXQiLCJpbmhlcml0cyIsInByb3RvdHlwZSIsImRlc3Ryb3kiLCJlcnIiLCJwYXVzZSIsInJlc3VtZSIsInRvRXJyb3IiLCJtZXRob2QiLCJwYXRoIiwibXNnIiwic3RhdHVzIiwiRXJyb3IiLCJzZXRTdGF0dXNQcm9wZXJ0aWVzIiwiY29uc29sZSIsIndhcm4iLCJ0b0pTT04iXSwibWFwcGluZ3MiOiI7O0FBQUE7OztBQUlBLElBQU1BLElBQUksR0FBR0MsT0FBTy***REMOVED***DQUFDLE1BQUQsQ0FBcEI7O0FBQ0EsSUFBTUMsTUFBTS***REMOVED***HQUFHRC***REMOVED***PQUFPLENBQUMsUUFBRC***REMOVED***DQUF0Qjs7QUFDQS***REMOVED***JQUFNRS***REMOVED***ZQUFZLEdBQUdGLE9BQU8sQ0FBQy***REMOVED***rQkFBRC***REMOVED***DQUE1QjtBQUVBOzs7OztBQUlBRy***REMOVED***NQUFNLENBQUNDLE9BQVAsR0FBaUJDLFFBQWpCO0FBRUE7Ozs7Ozs7Ozs7Ozs7O0FBY0EsU0FBU0EsUUFBVC***REMOVED***DQUFrQkMsR0FBbEIsRUFBdUI7QUFDckJMLEVBQUFBLE1BQU0sQ0FBQ00sSUFBUC***REMOVED***DQUFZLElBQVo7QUFDQS***REMOVED***PQUFLQy***REMOVED***HQUFMLEdBQVdGLEdBQUcsQ0FBQ0UsR0FBZjtBQUZ***REMOVED***Qi***REMOVED***NQUdiQS***REMOVED***HQUhhLEdBR0wsSUFISy***REMOVED***DQUdiQS***REMOVED***HQUhhO0FBSXJCLE9BQUtDLE9BQUwsR0FBZUgsR0FBZjtBQUNBLE9BQUtBLEdBQUwsR0FBV0EsR0FBRy***REMOVED***DQUFDQS***REMOVED***HQUFmO0FBQ0EsT0FBS0ksSUFBTC***REMOVED***HQUFZRi***REMOVED***HQUFHLENBQUNFLElBQWhCO0FBQ0EsT0FBS0MsSUFBTC***REMOVED***HQUFZSC***REMOVED***HQUFHLENBQUNHLElBQUosS0FBYUMsU0FBYi***REMOVED***HQUF5Qi***REMOVED***FQUF6Qi***REMOVED***HQUE4QkosR0FBRy***REMOVED***DQUFDRy***REMOVED***JQUE5QztBQUNBLE9BQUtFLEtBQUwsR0FBYUwsR0FBRy***REMOVED***DQUFDSy***REMOVED***LQUFKLElBQWEsRUFBMUI7QUFDQS***REMOVED***PQUFLQy***REMOVED***RQUFMLEdBQWdCUi***REMOVED***HQUFHLENBQUNTLFlBQXBCO0FBQ0EsT0FBS0MsT0FBTC***REMOVED***HQUFlUi***REMOVED***HQUFHLENBQUNRLE9BQW5CO0FBQ0EsT0FBS0MsTUFBTC***REMOVED***HQUFjLEtBQUtELE9BQW5COztBQUNBLE9BQUtFLG9CQUFMLENBQTBCVi***REMOVED***HQUFHLENBQUNXLFVBQTlCOztBQUNBLE9BQUtDLG9CQUFMLENBQTBCLEtBQUtILE1BQS9COztBQUNBLE9BQUtJLFdBQUwsR0FBbUJiLEdBQUcsQ0FBQ2EsV0FBSi***REMOVED***DQUFnQkMsSUFBaEIsQ0FBcUJkLEdBQXJCLENBQW5CO0FBQ0FBLEVBQUFBLEdBQUcsQ0FBQ2UsRUFBSi***REMOVED***DQUFPLE1BQVAsRUFBZS***REMOVED***LQUFLQy***REMOVED***JQUFMLENBQVVGLElBQVYsQ0FBZS***REMOVED***JQUFmLEVBQXFCLE1BQXJCLENBQWY7QUFDQWQsRUFBQUEsR0FBRy***REMOVED***DQUFDZS***REMOVED***FQUFKLENBQU8sS0FBUC***REMOVED***FQUFjLEtBQUtDLElBQUwsQ0FBVUYsSUFBVi***REMOVED***DQUFlLElBQWYsRUFBcUIsS0FBckIsQ0FBZDtBQUNBZC***REMOVED***FQUFBQS***REMOVED***HQUFHLENBQUNlLEVBQUosQ0FBTy***REMOVED***PQUFQLEVBQWdCLEtBQUtDLElBQUwsQ0FBVUYsSUFBVi***REMOVED***DQUFlLElBQWYsRUFBcUIsT0FBckIsQ0FBaEI7QUFDQWQsRUFBQUEsR0FBRy***REMOVED***DQUFDZS***REMOVED***FQUFKLENBQU8sT0FBUC***REMOVED***FQUFnQi***REMOVED***LQUFLQy***REMOVED***JQUFMLENBQVVGLElBQVYsQ0FBZS***REMOVED***JQUFmLEVBQXFCLE9BQXJCLENBQWhCO0FBQ0Q7QUFFRDs7Ozs7QUFJQXZCLElBQUksQ0FBQzBCLFFBQUwsQ0FBY3BCLFFBQWQsRUFBd0JKLE1BQXhCLEUsQ0FDQTs7QUFDQUMsWUFBWS***REMOVED***DQUFDRy***REMOVED***RQUFRLENBQUN***REMOVED***Qi***REMOVED***TQUFWLENBQVo7QUFFQTs7OztBQUlBckIsUUFBUS***REMOVED***DQUFDcUIsU0FBVC***REMOVED***DQUFtQkMsT0FBbkIsR0FBNkIsVUFBU0MsR0FBVC***REMOVED***FQUFjO0FBQ3pDLE9BQUtwQi***REMOVED***HQUFMLENBQVNtQi***REMOVED***PQUFULENBQWlCQy***REMOVED***HQUFqQjtBQUNELENBRkQ7QUFJQTs7Ozs7QUFJQXZCLFFBQVEsQ0FBQ3FCLFNBQVQsQ0FBbUJHLEtBQW5CLEdBQTJCLFlBQVc7QUFDcEMsT0FBS3JCLEdBQUwsQ0FBU3FCLEtBQVQ7QUFDRC***REMOVED***DQUZEO0FBSUE7Ozs7O0FBSUF4Qi***REMOVED***RQUFRLENBQUN***REMOVED***Qi***REMOVED***TQUFULENBQW1CSS***REMOVED***NQUFuQi***REMOVED***HQUE0Qi***REMOVED***ZQUFXO0FBQ3JDLE9BQUt0Qi***REMOVED***HQUFMLENBQVNzQi***REMOVED***NQUFUO0FBQ0QsQ0FGRDtBQUlBOzs7Ozs7OztBQU9BekIsUUFBUS***REMOVED***DQUFDcUIsU0FBVC***REMOVED***DQUFtQkssT0FBbkIsR0FBNkIsWUFBVztBQUFBLE1BQzlCekIsR0FEOEIsR0FDdEIsSUFEc0IsQ0FDOUJBLEdBRDhCO0FBQUEsTUFFOUIwQi***REMOVED***NQUY4Qi***REMOVED***HQUVuQjFCLEdBRm1CLENBRTlCMEIsTUFGOEI7QUFBQS***REMOVED***NQUc5QkMsSUFIOEIsR0FHckIzQi***REMOVED***HQUh***REMOVED***Qi***REMOVED***DQUc5QjJCLElBSDhCO0FBS3RDLE1BQU1DLEdBQUcsb0JBQWFGLE1BQWIsY0FBdUJDLElBQXZCLGVBQWdDLEtBQUtFLE1BQXJDLE1BQVQ7QUFDQS***REMOVED***NQUFNUC***REMOVED***HQUFHLEdBQUcsSUFBSVEsS0FBSi***REMOVED***DQUFVRi***REMOVED***HQUFWLENBQVo7QUFDQU4sRUFBQUEsR0FBRy***REMOVED***DQUFDTy***REMOVED***NQUFKLEdBQWEsS0FBS0EsTUFBbEI7QUFDQVAsRUFBQUEsR0FBRy***REMOVED***DQUFDbEIsSUFBSi***REMOVED***HQUFXLEtBQUtBLElBQWhCO0FBQ0FrQi***REMOVED***FQUFBQS***REMOVED***HQUFHLENBQUNJLE1BQUosR0FBYUEsTUFBYjtBQUNBSi***REMOVED***FQUFBQS***REMOVED***HQUFHLENBQUNLLElBQUosR0FBV0EsSUFBWDtBQUVBLFNBQU9MLEdBQVA7QUFDRC***REMOVED***DQWJEOztBQWVBdkIsUUFBUS***REMOVED***DQUFDcUIsU0FBVC***REMOVED***DQUFtQlcsbUJBQW5CLEdBQXlDLFVBQVNGLE1BQVQsRUFBaUI7QUFDeERHLEVBQUFBLE9BQU8sQ0FBQ0MsSUFBUi***REMOVED***DQUFhLDJEQUFiO0FBQ0EsU0FBTy***REMOVED***LQUFLckIsb0JBQUwsQ0FBMEJpQi***REMOVED***NQUE***REMOVED***Qi***REMOVED***DQUFQO0FBQ0QsQ0FIRDtBQUtBOzs7Ozs7OztBQU9BOUIsUUFBUS***REMOVED***DQUFDcUIsU0FBVC***REMOVED***DQUFtQmMsTUFBbkIsR0FBNEIsWUFBVztBQUNyQy***REMOVED***TQUFPO0FBQ0***REMOVED***sQy***REMOVED***JQUFBQS***REMOVED***HQUFHLEVBQUUsS0FBS0csT0FBTC***REMOVED***DQUFhK0IsTUFBYi***REMOVED***FQURBO0FBRU***REMOVED***2Qi***REMOVED***JQUFBQS***REMOVED***NQUFNLEVBQUUsS0FBS0EsTUFGUjtBQUdMa0IsSUFBQUEsTUFBTS***REMOVED***FQUFFLEtBQUtBLE1BSFI7QUFJTHpCLElBQUFBLElBQUksRUFBRS***REMOVED***LQUFLQTtBQUpOLEdBQVA7QUFNRC***REMOVED***DQVBEIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLl***REMOVED***uICovXG5cbmNvbnN0IHV0aWwgPSByZXF1aXJlKCd1dGlsJyk7XG5jb25zdCBTdHJlYW0gPSByZXF1aXJlKCdzdHJlYW0nKTtcbmNvbnN0IFJlc3BvbnNlQmFzZSA9IHJlcXVpcmUoJy4uL3Jlc3BvbnNlLWJhc2UnKTtcbl***REMOVED***uLyoqXG4gKiBFeHBvc2UgYFJlc3BvbnNlYC5cbiAqL1***REMOVED***uXG5tb2R1bGUuZXhwb3J0cyA9IFJlc3BvbnNlO1***REMOVED***uXG4vKipcbiAqIEluaXRpYW***REMOVED***pemUgYSBuZXcgYFJlc3BvbnNlYCB3aXRoIHRoZSBnaXZlbiBgeGhyYC5cbiAqXG4gKiAgLSBzZXQgZm***REMOVED***hZ3MgKC5vaywgLmVycm9yLCBldGMpXG4gKiAgLSBwYXJzZSBoZWFkZXJcbiAqXG4gKiBAcGFyYW0ge1JlcXVlc3R9IHJlcV***REMOVED***uICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEBjb25zdHJ1Y3Rvcl***REMOVED***uICogQGV4dGVuZHMge1N0cmVhbX1cbiAqIEBpbXBsZW1lbnRzIHtSZWFkYWJsZVN0cmVhbX1cbiAqIEBhcGkgcHJpdmF0ZV***REMOVED***uICovXG5cbmZ1bmN0aW9uIFJlc3BvbnNlKHJlcSkge1***REMOVED***uICBTdHJlYW0uY2FsbCh0aGlzKTtcbiAgdGhpcy5yZXMgPSByZXEucmVzO1***REMOVED***uICBjb25zdCB7IHJlcyB9ID0gdGhpcztcbiAgdGhpcy5yZXF1ZXN0ID0gcmV***REMOVED***O1***REMOVED***uICB0aGlzLnJlcSA9IHJlcS5yZXE7XG4gIHRoaXMudGV4dCA9IHJlcy50ZXh0O1***REMOVED***uICB0aGlzLmJvZHkgPSByZXMuYm9keSA9PT0gdW5kZWZpbmVkID8ge30gOiByZXMuYm9keTtcbiAgdGhpcy5maW***REMOVED***lcyA9IHJlcy5maW***REMOVED***lcyB8fCB7fTtcbiAgdGhpcy5idWZmZXJlZCA9IHJlcS5fcmVzQnVmZmVyZWQ7XG4gIHRoaXMuaGVhZGVycyA9IHJlcy5oZWFkZXJzO1***REMOVED***uICB0aGlzLmhlYWRlciA9IHRoaXMuaGVhZGVycztcbiAgdGhpcy5fc2V0U3RhdHVzUHJvcGVydGllcyhyZXMuc3RhdHVzQ29kZSk7XG4gIHRoaXMuX3NldEhlYWRlclByb3BlcnRpZXModGhpcy5oZWFkZXIpO1***REMOVED***uICB0aGlzLnNldEVuY29kaW5nID0gcmVzLnNldEVuY29kaW5nLmJpbmQocmVzKTtcbiAgcmVzLm9uKCdkYXRhJywgdGhpcy5lbWl0LmJpbmQodGhpcywgJ2RhdGEnKSk7XG4gIHJlcy5vbignZW5kJywgdGhpcy5lbWl0LmJpbmQodGhpcywgJ2VuZCcpKTtcbiAgcmVzLm9uKCdjbG9zZScsIHRoaXMuZW1pdC5iaW5kKHRoaXMsICdjbG9zZScpKTtcbiAgcmVzLm9uKCdlcnJvcicsIHRoaXMuZW1pdC5iaW5kKHRoaXMsICdlcnJvcicpKTtcbn1cbl***REMOVED***uLyoqXG4gKiBJbmhlcml0IGZyb20gYFN0cmVhbWAuXG4gKi9cbl***REMOVED***udXRpbC5pbmhlcml0cyhSZXNwb25zZSwgU3RyZWFtKTtcbi8vIGVzbGludC1kaXNhYm***REMOVED***lLW5leHQtbGluZSBuZXctY2FwXG5SZXNwb25zZUJhc2UoUmVzcG9uc2UucHJvdG90eXBlKTtcbl***REMOVED***uLyoqXG4gKiBJbXBsZW1lbnRzIG1ldGhvZHMgb2YgYSBgUmVhZGFibGVTdHJlYW1gXG4gKi9cbl***REMOVED***uUmVzcG9uc2UucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbihlcnIpIHtcbiAgdGhpcy5yZXMuZGVzdHJveShlcnIpO1***REMOVED***ufTtcbl***REMOVED***uLyoqXG4gKiBQYXVzZS5cbiAqL1***REMOVED***uXG5SZXNwb25zZS5wcm90b3R5cGUucGF1c2UgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5yZXMucGF1c2UoKTtcbn07XG5cbi8qKl***REMOVED***uICogUmVzdW1lLl***REMOVED***uICovXG5cblJlc3BvbnNlLnByb3RvdHlwZS5yZXN1bWUgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5yZXMucmVzdW1lKCk7XG59O1***REMOVED***uXG4vKipcbiAqIFJldHVybiBhbiBgRXJyb3JgIHJlcHJlc2VudGF0aXZlIG9mIHRoaXMgcmVzcG9uc2UuXG4gKl***REMOVED***uICogQHJldHVybiB7RXJyb3J9XG4gKiBAYXBpIHB1Ym***REMOVED***pY1***REMOVED***uICovXG5cblJlc3BvbnNlLnByb3RvdHlwZS50b0Vycm9yID0gZnVuY3Rpb24oKSB7XG4gIGNvbnN0IHsgcmV***REMOVED***IH0gPSB0aGlzO1***REMOVED***uICBjb25zdCB7IG1ldGhvZCB9ID0gcmV***REMOVED***O1***REMOVED***uICBjb25zdCB7IHBhdGggfSA9IHJlcTtcbl***REMOVED***uICBjb25zdCBtc2cgPSBgY2Fubm90ICR7bWV0aG9kfSAke3BhdGh9ICgke3RoaXMuc3RhdHVzfSlgO1***REMOVED***uICBjb25zdCBlcnIgPSBuZXcgRXJyb3IobXNnKTtcbiAgZXJyLnN0YXR1cyA9IHRoaXMuc3RhdHVzO1***REMOVED***uICBlcnIudGV4dCA9IHRoaXMudGV4dDtcbiAgZXJyLm1ldGhvZCA9IG1ldGhvZDtcbiAgZXJyLnBhdGggPSBwYXRoO1***REMOVED***uXG4gIHJldHVybiBlcnI7XG59O1***REMOVED***uXG5SZXNwb25zZS5wcm90b3R5cGUuc2V0U3RhdHVzUHJvcGVydGllcyA9IGZ1bmN0aW9uKHN0YXR1cykge1***REMOVED***uICBjb25zb2***REMOVED***lLndhcm4oJ0luIHN1cGVyYWdlbnQgMi54IHNldFN0YXR1c1Byb3BlcnRpZXMgaXMgYSBwcml2YXRlIG1ldGhvZCcpO1***REMOVED***uICByZXR1cm4gdGhpcy5fc2V0U3RhdHVzUHJvcGVydGllcyhzdGF0dXMpO1***REMOVED***ufTtcbl***REMOVED***uLyoqXG4gKiBUbyBqc29uLl***REMOVED***uICpcbiAqIEByZXR1cm4ge09iamVjdH1cbiAqIEBhcGkgcHVibGljXG4gKi9cbl***REMOVED***uUmVzcG9uc2UucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uKCkge1***REMOVED***uICByZXR1cm4ge1***REMOVED***uICAgIHJlcTogdGhpcy5yZXF1ZXN0LnRvSlNPTigpLF***REMOVED***uICAgIGhlYWRlcjogdGhpcy5oZWFkZXIsXG4gICAgc3RhdHVzOiB0aGlzLnN0YXR1cy***REMOVED***cbiAgICB0ZXh0OiB0aGlzLnRleHRcbiAgfTtcbn07XG4iXX0=