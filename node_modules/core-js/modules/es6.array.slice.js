'use strict';
var $e***REMOVED***port = require('./_e***REMOVED***port');
var html = require('./_html');
var cof = require('./_cof');
var toAbsoluteInde***REMOVED*** = require('./_to-absolute-inde***REMOVED***');
var toLength = require('./_to-length');
var arraySlice = [].slice;

// fallback for not array-like ES3 strings and DOM objects
$e***REMOVED***port($e***REMOVED***port.P + $e***REMOVED***port.F * require('./_fails')(function () {
  if (html) arraySlice.call(html);
}), 'Array', {
  slice: function slice(begin, end) {
    var len = toLength(this.length);
    var klass = cof(this);
    end = end === undefined ? len : end;
    if (klass == 'Array') return arraySlice.call(this, begin, end);
    var start = toAbsoluteInde***REMOVED***(begin, len);
    var upTo = toAbsoluteInde***REMOVED***(end, len);
    var size = toLength(upTo - start);
    var cloned = new Array(size);
    var i = 0;
    for (; i < size; i++) cloned[i] = klass == 'String'
      ? this.charAt(start + i)
      : this[start + i];
    return cloned;
  }
});
