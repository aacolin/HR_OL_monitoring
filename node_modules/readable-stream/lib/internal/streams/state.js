'use strict';

var ERR_INVALID_OPT_VALUE = require('../../../errors').codes.ERR_INVALID_OPT_VALUE;
function highWaterMarkFrom(options, isDuple***REMOVED***, duple***REMOVED***Key) {
  return options.highWaterMark != null ? options.highWaterMark : isDuple***REMOVED*** ? options[duple***REMOVED***Key] : null;
}
function getHighWaterMark(state, options, duple***REMOVED***Key, isDuple***REMOVED***) {
  var hwm = highWaterMarkFrom(options, isDuple***REMOVED***, duple***REMOVED***Key);
  if (hwm != null) {
    if (!(isFinite(hwm) && Math.floor(hwm) === hwm) || hwm < 0) {
      var name = isDuple***REMOVED*** ? duple***REMOVED***Key : 'highWaterMark';
      throw new ERR_INVALID_OPT_VALUE(name, hwm);
    }
    return Math.floor(hwm);
  }

  // Default value
  return state.objectMode ? 16 : 16 * 1024;
}
module.e***REMOVED***ports = {
  getHighWaterMark: getHighWaterMark
};